# FHSæ–‡ä»¶ç³»ç»Ÿ

```zsh
# åŸºæœ¬æ¦‚å¿µ
1. ä¸€åˆ‡éƒ½æ˜¯æ–‡ä»¶ï¼šLinuxå°†è®¾å¤‡ã€è¿›ç¨‹ã€ç½‘ç»œè¿æ¥ç­‰éƒ½è¡¨ç¤ºä¸ºæ–‡ä»¶
2. åŒºåˆ†å¤§å°å†™ï¼šæ–‡ä»¶åå’Œè·¯å¾„åŒºåˆ†å¤§å°å†™
3. æ²¡æœ‰é©±åŠ¨å™¨å­—æ¯ï¼šä¸åƒWindowsä½¿ç”¨C:ã€D:ç­‰ï¼ŒLinuxä½¿ç”¨æŒ‚è½½ç‚¹

# æ–‡ä»¶ç³»ç»Ÿç±»å‹
1. ext4ï¼šæœ€å¸¸ç”¨çš„Linuxæ–‡ä»¶ç³»ç»Ÿï¼Œç¨³å®šå¯é 
2. Btrfsï¼šå…·æœ‰é«˜çº§åŠŸèƒ½çš„ç°ä»£æ–‡ä»¶ç³»ç»Ÿ(å¿«ç…§ã€å‹ç¼©ç­‰)
3. XFSï¼šé«˜æ€§èƒ½æ–‡ä»¶ç³»ç»Ÿï¼Œé€‚åˆå¤§æ–‡ä»¶
4. ZFSï¼šé«˜çº§æ–‡ä»¶ç³»ç»Ÿï¼Œå…·æœ‰å¼ºå¤§çš„æ•°æ®å®Œæ•´æ€§åŠŸèƒ½
5. tmpfsï¼šå†…å­˜ä¸­çš„ä¸´æ—¶æ–‡ä»¶ç³»ç»Ÿ
6. vfat/FAT32ï¼šå…¼å®¹Windowsçš„ç®€å•æ–‡ä»¶ç³»ç»Ÿ

# æ ‡å‡†ç›®å½•ç»“æ„
/
â”œâ”€â”€ bin -> usr/bin          # åŸºæœ¬ç”¨æˆ·å‘½ä»¤äºŒè¿›åˆ¶æ–‡ä»¶(ç¬¦å·é“¾æ¥åˆ°/usr/bin)
â”œâ”€â”€ boot                    # å¼•å¯¼åŠ è½½ç¨‹åºå’Œå†…æ ¸æ–‡ä»¶
â”œâ”€â”€ dev                     # è®¾å¤‡æ–‡ä»¶
â”œâ”€â”€ etc                     # ç³»ç»Ÿé…ç½®æ–‡ä»¶
â”œâ”€â”€ home                    # ç”¨æˆ·ä¸»ç›®å½•
â”œâ”€â”€ lib -> usr/lib          # åŸºæœ¬å…±äº«åº“(ç¬¦å·é“¾æ¥åˆ°/usr/lib)
â”œâ”€â”€ lib64 -> usr/lib64      # 64ä½å…±äº«åº“(ç¬¦å·é“¾æ¥åˆ°/usr/lib64)
â”œâ”€â”€ mnt                     # ä¸´æ—¶æŒ‚è½½ç‚¹
â”œâ”€â”€ opt                     # å¯é€‰åº”ç”¨ç¨‹åºè½¯ä»¶åŒ…
â”œâ”€â”€ proc                    # è¿›ç¨‹å’Œå†…æ ¸ä¿¡æ¯è™šæ‹Ÿæ–‡ä»¶ç³»ç»Ÿ
â”œâ”€â”€ root                    # rootç”¨æˆ·çš„ä¸»ç›®å½•
â”œâ”€â”€ run                     # è¿è¡Œæ—¶å˜é‡æ•°æ®
â”œâ”€â”€ sbin -> usr/sbin        # ç³»ç»Ÿç®¡ç†å‘½ä»¤(ç¬¦å·é“¾æ¥åˆ°/usr/sbin)
â”œâ”€â”€ srv                     # æºä»£ç å­˜å‚¨
â”œâ”€â”€ sys                     # ç³»ç»Ÿè®¾å¤‡å’Œå†…æ ¸ä¿¡æ¯è™šæ‹Ÿæ–‡ä»¶ç³»ç»Ÿ
â”œâ”€â”€ tmp                     # ä¸´æ—¶æ–‡ä»¶,ç³»ç»Ÿå®šæ—¶è‡ªåŠ¨æ¸…é™¤
â”œâ”€â”€ usr                     # ç”¨æˆ·ç¨‹åºå’Œæ•°æ®
â”‚   â”œâ”€â”€ bin                 # å¤§å¤šæ•°ç”¨æˆ·å‘½ä»¤
â”‚   â”œâ”€â”€ include             # Cå¤´æ–‡ä»¶
â”‚   â”œâ”€â”€ lib                 # åº“æ–‡ä»¶
â”‚   â”œâ”€â”€ local               # æœ¬åœ°å®‰è£…çš„è½¯ä»¶
â”‚   â”œâ”€â”€ sbin                # éå¿…è¦çš„ç³»ç»Ÿç®¡ç†å‘½ä»¤
â”‚   â””â”€â”€ share               # æ¶æ„æ— å…³æ•°æ®
â””â”€â”€ var                     # å¯å˜æ•°æ®æ–‡ä»¶
    â”œâ”€â”€ cache               # åº”ç”¨ç¨‹åºç¼“å­˜æ•°æ®
    â”œâ”€â”€ lib                 # çŠ¶æ€ä¿¡æ¯
    â”œâ”€â”€ log                 # æ—¥å¿—æ–‡ä»¶
    â”œâ”€â”€ spool               # ç­‰å¾…å¤„ç†çš„æ–‡ä»¶
    â””â”€â”€ tmp                 # ç³»ç»Ÿé‡å¯é—´ä¿ç•™çš„ä¸´æ—¶æ–‡ä»¶

# é‡è¦ç›®å½•
1. /etcï¼šç³»ç»Ÿé…ç½®æ–‡ä»¶
   - `/etc/fstab`ï¼šæ–‡ä»¶ç³»ç»ŸæŒ‚è½½ä¿¡æ¯
   - `/etc/passwd`ï¼šç”¨æˆ·è´¦æˆ·ä¿¡æ¯
   - `/etc/group`ï¼šç”¨æˆ·ç»„ä¿¡æ¯

2. /varï¼šç»å¸¸å˜åŒ–çš„æ–‡ä»¶
   - `/var/log`ï¼šç³»ç»Ÿæ—¥å¿—
   - `/var/cache`ï¼šåº”ç”¨ç¨‹åºç¼“å­˜

3. /procï¼šè™šæ‹Ÿæ–‡ä»¶ç³»ç»Ÿï¼Œæä¾›è¿›ç¨‹å’Œç³»ç»Ÿä¿¡æ¯
   - `/proc/cpuinfo`ï¼šCPUä¿¡æ¯
   - `/proc/meminfo`ï¼šå†…å­˜ä¿¡æ¯
   - `/proc/[pid]`ï¼šç‰¹å®šè¿›ç¨‹ä¿¡æ¯

4. /devï¼šè®¾å¤‡æ–‡ä»¶
   - `/dev/sda`ï¼šç¬¬ä¸€å—ç¡¬ç›˜
   - `/dev/sda1`ï¼šç¬¬ä¸€å—ç¡¬ç›˜çš„ç¬¬ä¸€ä¸ªåˆ†åŒº
   - `/dev/null`ï¼šç©ºè®¾å¤‡ï¼Œä¸¢å¼ƒæ‰€æœ‰å†™å…¥

# ç›¸å¯¹è·¯å¾„
# å½“å‰ç›®å½•
.
# ä¸Šçº§ç›®å½•
..
# ç”¨æˆ·ç›®å½•
~

# ç»å¯¹è·¯å¾„:ä»/å¼€å§‹
/home/andy/1.txt

# é¢œè‰²çš„å«ä¹‰
ç™½è‰²:æ™®é€šæ–‡ä»¶ï¼ˆå¦‚æ–‡æœ¬æ–‡ä»¶ã€é…ç½®æ–‡ä»¶ç­‰ï¼‰
è“è‰²:ç›®å½•ç»¿è‰²å¯æ‰§è¡Œæ–‡ä»¶ï¼ˆå…·æœ‰ `+x` æƒé™ï¼‰
é’è‰²/æµ…è“:ç¬¦å·é“¾æ¥ï¼ˆå¿«æ·æ–¹å¼ï¼‰
çº¢è‰²:å‹ç¼©æ–‡ä»¶ï¼ˆå¦‚ `.zip`, `.tar.gz`, `.rar` ç­‰ï¼‰
ç´«è‰²:å›¾ç‰‡æˆ–å¤šåª’ä½“æ–‡ä»¶ï¼ˆå¦‚ `.jpg`, `.png`, `.mp3`, `.mp4`ï¼‰
é»„è‰²:è®¾å¤‡æ–‡ä»¶ï¼ˆå¦‚ `/dev/sda`, `/dev/tty`ï¼‰
çº¢è‰²é—ªçƒ:æŸåçš„ç¬¦å·é“¾æ¥ï¼ˆæŒ‡å‘ä¸å­˜åœ¨çš„æ–‡ä»¶ï¼‰
çº¢è‰²åº•:suidæ ‡è®°
é»‘åº•é»„å­—:ç®¡é“æ–‡ä»¶ï¼ˆFIFOï¼‰ï¼ˆå¦‚ `mkfifo` åˆ›å»ºçš„ï¼‰
é»‘åº•ç»¿å­—:Socket æ–‡ä»¶ï¼ˆå¦‚ `/run` ä¸‹çš„æŸäº›æ–‡ä»¶ï¼‰
```



# shell

Shellï¼šè›‹å£³çš„æ„æ€ï¼Œæ˜¯linuxä¸­æ¯”è¾ƒé‡è¦çš„ä¸€ä¸ªæ¦‚å¿µï¼Œæ‰€æœ‰çš„å‘½ä»¤å…¶å®éƒ½ç§°ä¹‹ä¸ºshellå‘½ä»¤ã€‚
çœ‹å›¾è§£ï¼šshellå°±æ˜¯å†…æ ¸çš„ä¸€ä¸ªå¤–å£³ï¼Œç”¨æˆ·é€šè¿‡shellæ¥æ§åˆ¶å†…æ ¸è¿›è€Œé©±åŠ¨ç¡¬ä»¶åšäº‹æƒ…ï¼Œè¿™æ˜¯å®ƒåå­—çš„ç”±æ¥ã€‚Linuxä¸‹ï¼Œæ²¡æœ‰shellçš„è¯ï¼Œå°±ä¸èƒ½æ§åˆ¶è¿™ä¸ªè®¡ç®—æœºäº†ï¼Œå› ä¸ºå†…æ ¸æ˜¯ç”¨æˆ·ä¸èƒ½ç›´æ¥æ§åˆ¶çš„ã€‚

![image-20250725201947726](assets/image-20250725201947726.png)



## zsh

```zsh
# å®‰è£…zsh
sudo pacman -S zsh

echo $SHELL # æŸ¥çœ‹å½“å‰shell
chsh -s $(which zsh)  # ä¿®æ”¹é»˜è®¤ shell

# å®‰è£…nerd-font
yay -S ttf-agave-nerd

# å®‰è£…oh-my-zsh
sudo pacman -S oh-my-zsh-git
whereis oh-my-zsh # æ‰¾åˆ°oh-my-zshæ–‡ä»¶å¤¹
# /usr/share/oh-my-zsh
# å¤åˆ¶zshrcåˆ°~/.zhsrc

# å®‰è£…å‘½ä»¤æç¤ºæ’ä»¶
cd /usr/share/oh-my-zsh/plugins
git clone git@github.com:zsh-users/zsh-autosuggestions.git
git clone git@github.com:zsh-users/zsh-syntax-highlighting.git

# é…ç½®
plugins=(git zsh-autosuggestions zsh-syntax-highlighting)

# ä½¿å¾—é…ç½®æ–‡ä»¶ç”Ÿæ•ˆ
source ~/.zshrc
```



## æŒ‡ä»¤

```zsh
# æŸ¥çœ‹å½“å‰shell
echo $SHELL

# æŸ¥çœ‹ä¸»æœºä¿¡æ¯
hostnamectl
# ä¿®æ”¹ä¸»æœºå
hostnamectl set-hostname xxx

# echo æ˜¯ Write-Output çš„åˆ«åï¼ˆAliasï¼‰ï¼Œç”¨äºè¾“å‡ºæ–‡æœ¬æˆ–å˜é‡å†…å®¹åˆ°æ ‡å‡†è¾“å‡ºï¼ˆstdoutï¼‰
# è¾“å‡ºå­—ç¬¦ä¸²
echo "Hello, World!"
# è¾“å‡ºåˆ°æ–‡ä»¶
echo "Hello" > output.txt       # è¦†ç›–å†™å…¥
echo "World" >> output.txt      # è¿½åŠ å†™å…¥
# æ ‡å‡†æ­£ç¡®è¾“å‡ºå’Œæ ‡å‡†é”™è¯¯è¾“å‡º
head 1.txt 1>>2.txt 2>>3.txt
# æ¸…ç©ºä¸€ä¸ªæ–‡ä»¶
>1.txt

# è¾“å…¥
cat < 1.txt
# æ ‡å‡†è¾“å…¥
cat << 0 > 1.txt

# æŸ¥æ‰¾ å¯æ‰§è¡Œæ–‡ä»¶ï¼ˆåœ¨ $PATH ç¯å¢ƒå˜é‡ä¸­çš„å‘½ä»¤ï¼‰çš„å®Œæ•´è·¯å¾„
which python
# æŸ¥æ‰¾å‘½ä»¤çš„ äºŒè¿›åˆ¶æ–‡ä»¶ã€æºç æ–‡ä»¶å’Œæ‰‹å†Œé¡µ çš„ä½ç½®ã€‚
whereis python
# æ˜¾ç¤º æ‰€æœ‰å¯èƒ½çš„åŒ¹é…è·¯å¾„ï¼ˆåŒ…æ‹¬åˆ«åã€å‡½æ•°ã€å¯æ‰§è¡Œæ–‡ä»¶ï¼‰ã€‚
where python

# æŸ¥çœ‹åˆ«å
alias
# å–æ¶ˆåˆ«å
unalias ls
# æ·»åŠ åˆ«å
alias rm='rm -i'

# æ˜¾ç¤ºå‘½ä»¤ç±»å‹
type cd

# å‘½ä»¤å†å² (history) .zsh_history
history | grep "apt install"  # æŸ¥æ‰¾å®‰è£…è¿‡çš„è½¯ä»¶
# æ¸…æ¥šå†å²æŒ‡ä»¤
history -c
# æŸ¥çœ‹historyèƒ½å¤Ÿå­˜å‚¨çš„æ•°
echo $HISTSIZE

# æ¸…å± (clear)
clear  # æˆ–ä½¿ç”¨å¿«æ·é”®Ctrl+L
```



## å¿«æ·é”®

```zsh
Ctrl+a #å…‰æ ‡è·³è½¬è‡³æ­£åœ¨è¾“å…¥çš„å‘½ä»¤è¡Œçš„é¦–éƒ¨
ctrl+e #å…‰æ ‡è·³è½¬è‡³æ­£åœ¨è¾“å…¥çš„å‘½ä»¤è¡Œçš„å°¾éƒ¨
ctr1+c #ç»ˆæ­¢å‰å°è¿è¡Œçš„ç¨‹åºï¼Œæ¯”å¦‚pingæŒ‡ä»¤
ctr1+d #åœ¨shel1ä¸­ï¼Œctrl-dè¡¨ç¤ºæ¨å‡ºå½“å‰she11ã€‚
ctr1+z #å°†ä»»åŠ¡æš‚åœï¼ŒæŒ‚è‡³åå°ï¼Œæ‰§è¡Œfgå‘½ä»¤ç»§ç»­è¿è¡Œ
ctrl+1 #æ¸…å±ï¼Œå’Œclearå‘½ä»¤ç­‰æ•ˆã€‚
ctr1+k #åˆ é™¤ä»å…‰æ ‡åˆ°è¡Œæœ«çš„æ‰€æœ‰å­—ç¬¦
ctr1+u #åˆ é™¤ä»å…‰æ ‡åˆ°è¡Œé¦–çš„æ‰€æœ‰å­—ç¬¦
ctr1+r #æœç´¢å†å²å‘½ä»¤ï¼Œåˆ©ç”¨å…³é”®å­—æœç´¢
ctr1+w #å…‰æ ‡å¾€å‰åˆ é™¤ä¸€ä¸ªå‚æ•°ï¼Œä»¥ç©ºæ ¼ä¸ºåˆ†å‰²ã€‚
```



# å‘è¡Œç‰ˆ



## arch

### å®‰è£…

```bash
iwctl
station wlan0 connect xxx
è¾“å…¥å¯†ç 
ping www.baidu.com

pacman -Sy archlinux-keyring
pacman -Sy archinstall
archinstall
```



### æ¢æº

```python
'''
æ¢å›½å†…é•œåƒæº
'''

# æ‰“å¼€é…ç½®æ–‡ä»¶
sudo nvim /etc/pacman.d/mirrorlist

#é˜¿é‡Œæº
Server = http://mirrors.aliyun.com/archlinux/$repo/os/$arch
#ä¸­ç§‘å¤§æº
Server = https://mirrors.ustc.edu.cn/archlinux/$repo/os/$arch
#æ¸…åæº
Server = https://mirrors.tuna.tsinghua.edu.cn/archlinux/$repo/os/$arch

# æ›´æ–°æº
sudo pacman -Syyu

'''
æ·»åŠ éå®˜æ–¹æº
'''

# æ‰“å¼€é…ç½®æ–‡ä»¶
sudo nvim /etc/pacman.conf

[archlinuxcn]
SigLevel = Optional TrustedOnly
# é˜¿é‡Œæº
Server = https://mirrors.aliyun.com/archlinuxcn/$arch
#ä¸­ç§‘å¤§æº
Server = https://mirrors.ustc.edu.cn/archlinuxcn/$arch
#æ¸…åæº
Server = https://mirrors.tuna.tsinghua.edu.cn/archlinuxcn/$arch
    
# å¯¼å…¥ archlinuxcn key
sudo pacman -Sy archlinuxcn-keyring

# å®‰è£…yay  base-devel
sudo pacman -Sy yay base-devel

# blackarch
curl -O https://blackarch.org/strap.sh
chmod +x strap.sh
sudo ./strap.sh

sudo nvim /etc/pacman.conf

[blackarch]
Server = https://mirrors.aliyun.com/blackarch/$repo/os/$arch
```



### ç¯å¢ƒ

```zsh
yay -S nvm rustup

# rustup(é»˜è®¤å·¥å…·é“¾)
rustup default stable

# nvm
echo 'source /usr/share/nvm/init-nvm.sh' >> ~/.bashrc
source ~/.bashrc

# nvmçš„ä½¿ç”¨

# å®‰è£…æœ€æ–°ç‰ˆæœ¬
nvm install node

# åˆ—å‡ºæœ¬åœ°å·²å®‰è£…ç‰ˆæœ¬
nvm ls

# ä½¿ç”¨ç‰¹å®šç‰ˆæœ¬
nvm use 18.12.1

# æŸ¥çœ‹å½“å‰ä½¿ç”¨çš„ Node.js ç‰ˆæœ¬
nvm current

# æŸ¥çœ‹nodeç‰ˆæœ¬
node --version

# æŸ¥çœ‹npmç‰ˆæœ¬
npm --version

# sdkman
curl -s "https://get.sdkman.io" | bash
source "$HOME/.sdkman/bin/sdkman-init.sh"

#sdkçš„ä½¿ç”¨

# æŸ¥çœ‹æ‰€æœ‰ JDK ç‰ˆæœ¬
sdk list java  
# æŸ¥çœ‹ Gradle ç‰ˆæœ¬
sdk list gradle
# å®‰è£…
sdk install java ç‰ˆæœ¬
# åˆ‡æ¢ç‰ˆæœ¬
sdk use java 11.0.20-amzn
# åˆ é™¤
sdk uninstall java 11.0.20-amzn
# 	æŸ¥çœ‹å½“å‰ä½¿ç”¨çš„ç‰ˆæœ¬
sdk current
```



### è½¯ä»¶

```zsh
# å®‰è£…çš„è½¯ä»¶
yay -Qeq | tr '\n' ' '

# å¸¸ç”¨å·¥å…·
yay -S archlinuxcn-keyring base base-devel blackarch-keyring docker docker-compose git neovim oh-my-zsh-git openssh yay zsh

# é»‘å®¢å·¥å…·
yay -S nmap aircrack-ng hydra
```



### å…¶ä»–

#### è®¾ç½®ä¸­æ–‡å­—ä½“

**å­—ä½“å®‰è£…**

```bash
sudo pacman -S noto-fonts-cjk
```

**ç³»ç»Ÿè®¾ç½®**

```bash
sudo vim /etc/locale.gen
# æŠŠä»¥ä¸‹å†…å®¹å‰çš„#å»æ‰
zh_CN.UTF-8 UTF-8

sudo locale-gen
```



#### å®‰è£è¾“å…¥æ³•

**å®‰è£…**

```bash
sudo pacman -S fcitx5-im fcitx5-chinese-addons
# wayland æ‰“å¼€
```


**é…ç½®**

```bash
vim ~/.pam_environment

GTK_IM_MODULE=fcitx
QT_IM_MODULE=fcitx
XMODIFIERS=@im=fcitx
SDL_IM_MODULE=fcitx
```



### pacman&yay

### -S

```bash
# å¼ºè¡Œåˆ·æ–°ä¸€éå†æ›´æ–°
sudo pacman -Syyu
yay -Syyu

# å®‰è£…è½¯ä»¶
sudo pacman -S è½¯ä»¶å
yay -S è½¯ä»¶å

# æœç´¢
sudo pacman -Ss è½¯ä»¶å
yay -Ss è½¯ä»¶å

# æ¸…ç†ç¼“å­˜
sudo pacman -Sc
yay -Sc
```

### -R

```bash
# åˆ é™¤è½¯ä»¶åŠå…¶ä¾èµ–ï¼Œå’Œå…¨å±€é…ç½®æ–‡ä»¶
sudo pacman -Rns
yay -Rns

# åˆ é™¤ä¸å†éœ€è¦çš„ä¾èµ–
sudo pacman -Rns $(pacman -Qdtq)
yay -Rns $(pacman -Qdtq)
```

### -Q

```bash
# æŸ¥è¯¢æ‰€æœ‰å®‰è£…çš„è½¯ä»¶
sudo pacman -Q
yay -Q

# æŸ¥è¯¢å®‰è£…äº†å¤šå°‘ä¸ªè½¯ä»¶
sudo pacman -Q | wc -l
yay -Q | wc -l

# æŸ¥è¯¢è‡ªå·±å®‰è£…çš„è½¯ä»¶
sudo pacman -Qe
yay -Qe

# æŸ¥è¯¢è‡ªå·±å®‰è£…äº†å¤šå°‘ä¸ªè½¯ä»¶
sudo pacman -Qe | wc -l
yay -Qe | wc -l

# æ•´ç†è‡ªå·±å®‰è£…çš„è½¯ä»¶
sudo pacman -Qeq
yay -Qeq

# æŸ¥è¯¢å…·ä½“è½¯ä»¶
sudo pacman -Qs è½¯ä»¶å
yay -Qs è½¯ä»¶å

# æŸ¥è¯¢ä¸å†éœ€è¦çš„è½¯ä»¶ä¾èµ–
sudo pacman -Qdt
yay -Qdt
```





## kali

### å®‰è£…

#### åœ¨ wsl2 ä¸­å®‰è£…

**æ‰“å¼€ terminal**

```
# å®‰è£…kali-linux
wsl --install kali-linux --web-download
# åˆ‡æ¢é»˜è®¤ç³»ç»Ÿä¸ºkali-linux
wsl --set-default kali-linux
# å¯åŠ¨
wsl -d kali-linux
# é€€å‡º
exit
```



**æ¢æº**

```
# ä¿®æ”¹æº
sudo vim /etc/apt/sources.list

# æŠŠç¬¬ä¸€è¡Œæ³¨é‡Šæ‰
#é˜¿é‡Œäº‘
deb http://mirrors.aliyun.com/kali kali-rolling main non-free contrib
deb-src http://mirrors.aliyun.com/kali kali-rolling main non-free contrib

sudo apt update && sudo apt upgrade
```



**å®‰è£… gui**

kexï¼šhttps://www.kali.org/news/win-kex-version-2-0/ 

```
# wslg(kex:kaliçš„GUI)
sudo apt install kali-win-kex
# æ‰“å¼€å›¾å½¢ç•Œé¢ï¼ˆç»å…¸æ¨¡å¼ï¼‰
kex --win -s
# æ— ç¼ç•Œé¢
kex --sl --s
```



### åœ¨ docker ä¸­å®‰è£…



**æ‰“å¼€ terminal**

```
# å¯åŠ¨
docker run -it kalilinux/kali-rolling /bin/bash

# æ›´æ–°
apt update

# ä¿®æ”¹æº
nvim /etc/apt/sources.list

# æŠŠç¬¬ä¸€è¡Œæ³¨é‡Šæ‰
#é˜¿é‡Œäº‘
deb http://mirrors.aliyun.com/kali kali-rolling main non-free contrib
deb-src http://mirrors.aliyun.com/kali kali-rolling main non-free contrib

apt update && apt upgrade

# éœ€è¦ä»€ä¹ˆè£…ä»€ä¹ˆ
apt install xxx

# åˆ—å‡ºé•œåƒ(å…³æ³¨ID)
docker ps -a

# å¯åŠ¨é•œåƒ
docker start ID

# å›åˆ°é•œåƒ
docker attach ID

# ä¿å­˜
docker commit ID åç§°
```



**å®‰è£…è½¯ä»¶åŒ…**

ä»¥ä¸‹æ˜¯ **Kali Linux ä¸»è¦å·¥å…·åŒ…ï¼ˆMetapackagesï¼‰å¯¹æ¯”è¡¨**ï¼ŒæŒ‰ä½ çš„éœ€æ±‚æ•´ç†ï¼ˆ**æ—  GUIã€å‘½ä»¤è¡Œæ¸—é€æµ‹è¯•**ï¼‰ï¼š

| å·¥å…·åŒ…åç§°                       | åŒ…å«å†…å®¹                                                     | é€‚åˆåœºæ™¯                       | å®‰è£…å‘½ä»¤                                          |
| -------------------------------- | ------------------------------------------------------------ | ------------------------------ | ------------------------------------------------- |
| kali-linux-core                  | æœ€åŸºç¡€ç³»ç»Ÿ + å°‘é‡æ ¸å¿ƒå·¥å…·ï¼ˆnmap, netcat, curl ç­‰ï¼‰           | ä»…éœ€åŸºç¡€ç¯å¢ƒï¼Œæ‰‹åŠ¨å®‰è£…å…¶ä»–å·¥å…· | sudo apt install kali-linux-core                  |
| kali-linux-headless              | æ‰€æœ‰æ—  GUI æ¸—é€å·¥å…·ï¼ˆmetasploit, sqlmap, hydra, john, aircrack-ng ç­‰ï¼‰ | æ¨èï¼çº¯å‘½ä»¤è¡Œæ¸—é€æµ‹è¯•å…¨è¦†ç›–   | sudo apt install kali-linux-headless              |
| kali-tools-top10                 | Kali å®˜æ–¹åå¤§å·¥å…·ï¼ˆnmap, metasploit, sqlmap, hydra ç­‰ï¼‰      | å¿«é€Ÿè·å–æ ¸å¿ƒå·¥å…·               | sudo apt install kali-tools-top10                 |
| kali-tools-information-gathering | ä¿¡æ¯æ”¶é›†å·¥å…·ï¼ˆdnsenum, sublist3r, theHarvester ç­‰ï¼‰          | ä¸“æ³¨ä¾¦å¯Ÿé˜¶æ®µ                   | sudo apt install kali-tools-information-gathering |
| kali-tools-web                   | Web æ¸—é€å·¥å…·ï¼ˆburpsuiteï¼ˆCLI æ¨¡å¼ï¼‰, sqlmap, nikto ç­‰ï¼‰      | Web åº”ç”¨æµ‹è¯•                   | sudo apt install kali-tools-web                   |
| kali-tools-passwords             | å¯†ç æ”»å‡»å·¥å…·ï¼ˆhashcat, john, hydra ç­‰ï¼‰                      | ç ´è§£å“ˆå¸Œ/å¯†ç                   | sudo apt install kali-tools-passwords             |
| kali-tools-exploitation          | æ¼æ´åˆ©ç”¨å·¥å…·ï¼ˆmetasploit, exploitdb ç­‰ï¼‰                     | æ¼æ´åˆ©ç”¨é˜¶æ®µ                   | sudo apt install kali-tools-exploitation          |



**é™„åŠ è¯´æ˜**

1. **** **kali-linux-headless** **æ˜¯æœ€ä½³å¹³è¡¡é€‰æ‹©**ï¼Œæ¶µç›–å¤§éƒ¨åˆ†å‘½ä»¤è¡Œå·¥å…·ä¸”æ—  GUI å†—ä½™ã€‚
2. **æŒ‰éœ€ç»„åˆ**ï¼šä¾‹å¦‚åŒæ—¶å®‰è£… kali-tools-web + kali-tools-passwords å¯ç²¾å‡†æ§åˆ¶å·¥å…·èŒƒå›´ã€‚
3. **Windows ç”¨æˆ·å»ºè®®**ï¼š 

- **WSL 2 Kali**ï¼šwsl --install -d kali-linux + å®‰è£…ä¸Šè¡¨å·¥å…·åŒ…ã€‚
- **Docker Kali**ï¼šè½»é‡çº§å®¹å™¨åŒ–æ–¹æ¡ˆï¼Œé€‚åˆå•æ¬¡ä»»åŠ¡ã€‚



**å·¥å…·åŒ…ä¾èµ–å…³ç³»**

- æ‰€æœ‰å·¥å…·åŒ…å‡åŸºäº kali-linux-coreï¼Œå®‰è£…æ—¶ä¼šè‡ªåŠ¨åŒ…å«åŸºç¡€ä¾èµ–ã€‚
- ä½¿ç”¨å‰åŠ¡å¿…æ›´æ–°ï¼š sudo apt update && sudo apt upgrade -y 



### åœ¨è™šæ‹Ÿæœºä¸­å®‰è£…

**å®‰è£… vmware æˆ–å…¶ä»–è™šæ‹Ÿæœº**

**å®‰è£…é•œåƒ**

[Get Kali | Kali Linux](https://www.kali.org/get-kali/#kali-virtual-machines)




### é…ç½®


### **æ›´æ¢æºï¼Œæ›´æ–°ç³»ç»Ÿå’Œè½¯ä»¶**

```
# ä¿®æ”¹æº
sudo vim /etc/apt/sources.list

# æŠŠç¬¬ä¸€è¡Œæ³¨é‡Šæ‰
#é˜¿é‡Œäº‘
deb http://mirrors.aliyun.com/kali kali-rolling main non-free contrib
deb-src http://mirrors.aliyun.com/kali kali-rolling main non-free contrib

sudo apt update && sudo apt upgrade
```



### **è¯­è¨€ä¸è¾“å…¥æ³•**

åœ¨ Kali Linux è‹±æ–‡ç¯å¢ƒä¸‹ä½¿ç”¨ä¸­æ–‡ï¼Œå¯ä»¥é€šè¿‡ä»¥ä¸‹æ­¥éª¤é…ç½®ç»ˆç«¯å’Œç³»ç»Ÿæ”¯æŒä¸­æ–‡æ˜¾ç¤ºåŠè¾“å…¥ã€‚



### **æ›´æ–°ç³»ç»Ÿå¹¶å®‰è£…ä¸­æ–‡è¯­è¨€åŒ…**

```
sudo apt update && sudo apt upgrade -y
sudo apt install locales fonts-noto-cjk -y  # åŒ…å«ä¸­æ–‡å­—ä½“å’ŒåŸºç¡€è¯­è¨€åŒ…
```



### **ç”Ÿæˆä¸­æ–‡åŒºåŸŸé…ç½®**

```
sudo dpkg-reconfigure locales
```

- ç”¨æ–¹å‘é”®æ‰¾åˆ°ä»¥ä¸‹é€‰é¡¹ï¼ˆæŒ‰ç©ºæ ¼é”®é€‰ä¸­ï¼‰ï¼š

```
zh_CN.UTF-8 UTF-8
en_US.UTF-8 UTF-8
```

- æŒ‰å›è½¦ç¡®è®¤ï¼Œç„¶åé€‰æ‹© zh_CN.UTF-8 ä½œä¸ºé»˜è®¤åŒºåŸŸï¼ˆå¯é€‰ï¼Œè‹¥æƒ³ä¿ç•™è‹±æ–‡ç•Œé¢åˆ™è·³è¿‡ï¼‰



### **å®‰è£…ä¸­æ–‡è¾“å…¥æ³•ï¼ˆå¦‚Fcitx5ï¼‰**

```
sudo apt install fcitx5 fcitx5-pinyin fcitx5-configtool -y
```

- é…ç½®ç¯å¢ƒå˜é‡

```
# è®¾ç½® Fcitx5 è¾“å…¥æ³•ç¯å¢ƒå˜é‡ï¼ˆæ°¸ä¹…ç”Ÿæ•ˆï¼‰
echo 'export GTK_IM_MODULE=fcitx5' >> ~/.zshrc
echo 'export QT_IM_MODULE=fcitx5' >> ~/.zshrc
echo 'export XMODIFIERS=@im=fcitx5' >> ~/.zshrc

# é‡æ–°åŠ è½½ Zsh é…ç½®
source ~/.zshrc
```

- å¯åŠ¨è¾“å…¥æ³•ï¼ˆéœ€å›¾å½¢ç¯å¢ƒæ”¯æŒï¼‰ï¼š

```
fcitx5 &
# æˆ–è€…è®¾ä¸ºå¼€æœºè‡ªå¯åŠ¨ï¼ˆæ¨èï¼‰
mkdir -p ~/.config/autostart/
cp /usr/share/applications/org.fcitx.Fcitx5.desktop ~/.config/autostart/
```

é€šè¿‡ fcitx5-configtool æ·»åŠ æ‹¼éŸ³è¾“å…¥æ³•ã€‚



### **éªŒè¯ä¸­æ–‡æ˜¾ç¤º**

```
echo "æµ‹è¯•ä¸­æ–‡æ˜¾ç¤º" | iconv -f utf8 -t gb2312 | iconv -f gb2312 -t utf8
ls ä¸­æ–‡ç›®å½•å  # è‹¥æœ‰ä¸­æ–‡æ–‡ä»¶/ç›®å½•å¯æµ‹è¯•æ˜¾ç¤º
```



### **å­—ä½“å›¾æ ‡å¤§å°**

**å›¾æ ‡å¤§å°**

![img](.\assets\v2-37375728d18a758eb30ed9dc3b452cbe_720w.png)



**çŠ¶æ€æ ** 

![img](.\assets\v2-94aaaa58b9feb4c512ff994c06b60b8e_720w.png)



**ç³»ç»Ÿå­—ä½“** 

![img](.\assets\v2-9e07133b42b555c55be43ced8bea07cf_720w.png)



**ç»ˆç«¯å­—ä½“** 

![img](.\assets\v2-17cfbc97ed01c9ce5533a1817c6855e9_720w.png)



**è¾“å…¥æ³•å­—ä½“** 

![img](.\assets\v2-2df1bc4c31a9d66de1b16d4319fdbc9e_720w.png)



### **é”å±æ—¶é—´**

![img](.\assets\v2-35913b6fbd5ad794b763226b3c67697a_720w.png)



### apt

### æ›´æ–°å¹¶å‡çº§

```zsh
# ä»é…ç½®çš„è½¯ä»¶æºä¸‹è½½æœ€æ–°çš„è½¯ä»¶åŒ…åˆ—è¡¨,å‡çº§æ‰€æœ‰å¯å‡çº§çš„è½¯ä»¶åŒ…
sudo apt update && sudo apt upgrade
# å®Œå…¨å‡çº§ç³»ç»Ÿ
sudo apt full-upgrade
# æ›´æ¿€è¿›çš„å‡çº§æ–¹å¼ï¼Œä¼šå¤„ç†ä¾èµ–å…³ç³»å˜åŒ–
# å¯èƒ½ä¼šåˆ é™¤ä¸€äº›è½¯ä»¶åŒ…ä»¥è§£å†³ä¾èµ–å†²çª
```



### å®‰è£…æ–°è½¯ä»¶åŒ…

```zsh
sudo apt install <package_name>
# ç¤ºä¾‹ï¼šå®‰è£… nmap
sudo apt install nmap

# å®‰è£…ç‰¹å®šç‰ˆæœ¬çš„è½¯ä»¶åŒ…
sudo apt install <package_name>=<version>
# ç¤ºä¾‹ï¼šå®‰è£…ç‰¹å®šç‰ˆæœ¬çš„ python3
sudo apt install python3=3.9.2-3

# æŸ¥çœ‹è½¯ä»¶æŠ¥å¯ç”¨çš„ç‰ˆæœ¬
apt policy <package_name>
# ç¤ºä¾‹ï¼šæŸ¥çœ‹ python3 å¯ç”¨ç‰ˆæœ¬
apt policy python3

# é˜»æ­¢ç‰¹å®šè½¯ä»¶åŒ…è¢«è‡ªåŠ¨å‡çº§
sudo apt-mark hold <package_name>
# ç¤ºä¾‹ï¼šä¿æŒå½“å‰å†…æ ¸ç‰ˆæœ¬
sudo apt-mark hold linux-image-$(uname -r)

# å…è®¸ç‰¹å®šè½¯ä»¶åŒ…è¢«è‡ªåŠ¨å‡çº§
sudo apt-mark unhold <package_name>
```



### å¸è½½å‘½ä»¤

```zsh
# ä»…åˆ é™¤è½¯ä»¶åŒ…ï¼ˆä¿ç•™é…ç½®æ–‡ä»¶ï¼‰
sudo apt remove è½¯ä»¶åŒ…å
# å½»åº•åˆ é™¤è½¯ä»¶åŒ…ï¼ˆåŒ…æ‹¬é…ç½®æ–‡ä»¶ï¼‰
sudo apt remove --purge xxx
# è‡ªåŠ¨æ¸…ç†ç›¸å…³ä¾èµ–
sudo apt autoremove
# ç»„åˆå‘½ä»¤
sudo apt purge --auto-remove è½¯ä»¶åŒ…å

# æ¸…ç†ç¼“å­˜
# åˆ é™¤ /var/cache/apt/archives/ ä¸­æ‰€æœ‰å·²ä¸‹è½½çš„ .deb åŒ…
sudo apt clean

# åªåˆ é™¤é‚£äº›æ— æ³•å†ä»ä»“åº“ä¸‹è½½çš„æ—§ç‰ˆæœ¬ .deb åŒ…
sudo apt autoclean
```



### å…¶ä»–

```zsh
# åœ¨è½¯ä»¶æºä¸­æœç´¢åŒ…å«å…³é”®å­—çš„è½¯ä»¶åŒ…
apt search <keyword>
# ç¤ºä¾‹ï¼šæœç´¢ä¸ wifi ç›¸å…³çš„å·¥å…·
apt search wifi

# æ˜¾ç¤ºè½¯ä»¶åŒ…çš„è¯¦ç»†ä¿¡æ¯
apt show <package_name>
# ç¤ºä¾‹ï¼šæŸ¥çœ‹ metasploit çš„è¯¦ç»†ä¿¡æ¯
apt show metasploit-framework

# åˆ—å‡ºæ‰€æœ‰å·²å®‰è£…çš„è½¯ä»¶åŒ…
apt list --installed
# å¯ä»¥é…åˆ grep è¿›è¡Œè¿‡æ»¤
apt list --installed | grep python

# å°è¯•ä¿®å¤æŸåçš„è½¯ä»¶åŒ…ä¾èµ–å…³ç³»
sudo apt --fix-broken install

# æ˜¾ç¤ºè½¯ä»¶åŒ…çš„ä¾èµ–å…³ç³»
apt depends <package_name>
# ç¤ºä¾‹ï¼šæŸ¥çœ‹ burpsuite çš„ä¾èµ–
apt depends burpsuite

# æ˜¾ç¤ºå“ªäº›è½¯ä»¶åŒ…ä¾èµ–æŒ‡å®šçš„è½¯ä»¶åŒ…
apt rdepends <package_name>
# ç¤ºä¾‹ï¼šæŸ¥çœ‹ python3 çš„åå‘ä¾èµ–
apt rdepends python3
```





# å‘½ä»¤

## æ–‡ä»¶å’Œç›®å½•

**åˆ›å»ºæ–‡ä»¶**

```zsh
touch xxx.txt

# æ‰¹é‡åˆ›å»ºæ–‡ä»¶(1.txt..10.txt)
touch {1..10}.txt
# åˆ›å»ºéšè—æ–‡ä»¶
touch .xx.txt
# æŒ‡å®šç›®å½•
touch /home/andy/xx.txt
```



**æŸ¥çœ‹æ–‡ä»¶**

```zsh
ls

# æŒ‡å®šæ–‡ä»¶ç±»å‹
ls *.txt
# æŸ¥çœ‹éšè—æ–‡ä»¶
ls -a
# æŸ¥çœ‹è¯¦ç»†ä¿¡æ¯
ls -l
```



**æŸ¥çœ‹æ–‡ä»¶ç±»å‹**

```zsh
file 213.zip
```





**ç§»åŠ¨æ–‡ä»¶/æ–‡ä»¶å¤¹**

```zsh
# å°†xx.txtç§»åŠ¨åˆ°/home/userç›®å½•ä¸‹
mv xx.txt /home/user

# é‡å‘½å
mv xx.txt xxx.txt

# é‡å‘½åæ–‡ä»¶å¤¹
mv xx xxx
```



**åˆ é™¤æ–‡ä»¶/æ–‡ä»¶å¤¹**

```zsh
# æ²¡æœ‰å›æ”¶ç«™
rm 4.txt 5.txt

# å¼ºåˆ¶åˆ é™¤
rm -f xx.txt
rm -f {5..10}.txt

# åˆ é™¤æ–‡ä»¶å¤¹
rm -r xxx

# å¼ºåˆ¶åˆ é™¤æ–‡ä»¶å¤¹
rm -rf xxx
```



**å¤åˆ¶æ–‡ä»¶**

```zsh
# å°†1.txtå¤åˆ¶åˆ°2.txt
cp 1.xtx 2.txt
# é€’å½’å¤åˆ¶ç›®å½•
cp -r andy test
```



**æŸ¥çœ‹å½“å‰ç›®å½•**

```
pwd
```

**åˆ›å»ºæ–‡ä»¶å¤¹**

```zsh
mkdir xxx
# åˆ›å»ºå¤šä¸ªæ–‡ä»¶å¤¹
mkdir xxx{01..10}
# ä¾æ¬¡åˆ›å»º
mkdir -p 1/2/3/4/5
```

**åˆ‡æ¢æ–‡ä»¶å¤¹**

```zsh
cd /var/www/html  # åˆ‡æ¢åˆ°ç»å¯¹è·¯å¾„
cd ..  # è¿”å›åˆ°ä¸Šä¸€çº§ç›®å½•
cd ~  # è¿”å›åˆ°ç”¨æˆ·ä¸»ç›®å½•
```



## æ–‡ä»¶ä¼ è¾“

![image-20250726111857298](assets/image-20250726111857298.png)



```zsh
# ä¸‹è½½æ–‡ä»¶ (wget)
wget https://example.com/file.zip

# æ›´å¼ºå¤§çš„ä¸‹è½½å·¥å…· (curl)
curl -o æœ¬åœ°å­˜æ”¾è·¯å¾„ æ–‡ä»¶ç½‘å€
curl -o file.zip https://example.com/file.zip
```



### scpä¼ è¾“

**ä¸¤ä¸ªlinuxç³»ç»Ÿ**

```zsh
#ä¸»è¦ç”¨äºlinuxå’ŒlinuxæœåŠ¡å™¨ä¹‹é—´ä¼ è¾“æ–‡ä»¶ï¼ŒScpè¦æ±‚æ¥å—æ•°æ®çš„ä¸€æ–¹è¦å¼€å¯äº†sshæœåŠ¡ç«¯æ‰è¡Œï¼Œå¦‚æœä½ ç”µè„‘æ˜¯è‹¹æœç”µè„‘macç³»ç»Ÿï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨scpæ¥ä¼ è¾“ï¼Œmacé»˜è®¤sshæœåŠ¡ç«¯æ˜¯æ²¡æœ‰å¼€å¯çš„ï¼Œå¯ä»¥è‡ªè¡Œå¼€å¯ï¼Œå®¢æˆ·ç«¯æ˜¯å¯ä»¥ç›´æ¥ä½¿ç”¨çš„ã€‚windowså¾€1inuxä¸Šé¢å‘é€æ–‡ä»¶ä¹Ÿå¯ä»¥ç”¨scpï¼Œä½†æ˜¯åªèƒ½å•å‘çš„ï¼Œå› ä¸ºwindowsä¸Šæ²¡æœ‰sshæœåŠ¡ç«¯ã€‚
#æŠŠæœ¬åœ°æ–‡ä»¶æ¨é€åˆ°è¿œç¨‹æœåŠ¡ç«¯
#æ ¼å¼ï¼šscpæœ¬åœ°æ–‡ä»¶è·¯å¾„è¿œç¨‹ä¸»æœºç”¨æˆ·@è¿œç¨‹ä¸»æœºipåœ°å€ï¼šè¿œç¨‹ä¸»æœºæŸä¸ªç›®å½•
scp typora-setup-x64.exe root@10.0.0.128:/tmp
#æŠŠè¿œç«¯æœåŠ¡æ–‡ä»¶æ‹‰å–åˆ°æœ¬åœ°
#æ ¼å¼ï¼šScpè¿œç¨‹ä¸»æœºç”¨æˆ·@è¿œç¨‹ä¸»æœºipåœ°å€ï¼šè¿œç¨‹ä¸»æœºæŸä¸ªæ–‡ä»¶è·¯å¾„æœ¬åœ°è·¯å¾„
scp root@10.0.0.128:/tmp/typora-setup-x64.exe
```

win10åŠä»¥ä¸Šç‰ˆæœ¬æ˜¯æœ‰scpæŒ‡ä»¤çš„ï¼Œwinå’Œwinä¹‹é—´æ˜¯ä¸èƒ½ä½¿ç”¨scpäº’ç›¸ä¼ æ–‡ä»¶çš„ï¼Œå› ä¸ºwindowsä¸Šé»˜è®¤æ˜¯æ²¡æœ‰sshçš„æœåŠ¡ç«¯çš„ï¼Œåªæœ‰å®¢æˆ·ç«¯ã€‚

```zsh
#windowsä½¿ç”¨scpç»™1inuxä¸Šä¼ æ–‡ä»¶çš„æ—¶å€™ï¼Œæ–‡ä»¶è·¯å¾„å’Œæ–‡ä»¶åä¸­ä¸å…è®¸å‡ºç°ä¸­æ–‡å’Œç©ºæ ¼ã€‚
#æ ¼å¼å’Œä¸Šé¢ä¸€æ ·
scp typora-setup-x64.exe root@10.0.0.128:/tmp
```





### rzå’Œsz

```zsh
#ä¸Šä¼ å’Œä¸‹è½½
rz #ä¸Šä¼ 
sZ #ä¸‹è½½

#éœ€è¦å…ˆå®‰è£…lrzszè½¯ä»¶åŒ…ï¼Œè¿™ä¸ªç”¨çš„æ¯”è¾ƒå¤š
pacman -S lrzsz

#ä¸Šä¼ çš„ä¾‹å­
rz -E

#ä¸‹è½½çš„ä¾‹å­
sz /root/test3.tar.gz#windowsä¸Šè‡ªè¡Œé€‰æ‹©å­˜å‚¨ç›®å½•
```





## ç½‘ç»œ

```zsh
# æ— çº¿ç½‘è¿æ¥
nmtui
iwctl

# æ£€æŸ¥ç½‘ç»œè¿æ¥ (ping)
ping google.com

# é‡å¯ç½‘ç»œè¿æ¥
systemctl restart network

# æ˜¾ç¤ºç½‘ç»œæ¥å£ä¿¡æ¯ (ifconfig)
ip a  # æ–°ç‰ˆæ›¿ä»£ifconfigçš„å‘½ä»¤

# æ˜¾ç¤ºç½‘ç»œè¿æ¥ (netstat)
ss -tulnp  # æ›¿ä»£netstatçš„ç°ä»£å‘½ä»¤

# è¿½è¸ªç½‘ç»œè·¯ç”± (traceroute)
traceroute google.com
mtr google.com  # æ›´å…ˆè¿›çš„æ›¿ä»£å“
```



### è¿è¡Œçº§åˆ«

```zsh
# è¿è¡Œçº§åˆ«0 å…³æœº
# è¿è¡Œçº§åˆ«1 å•ç”¨æˆ·ï¼Œè¿™ä¸ªç±»ä¼¼äºwindowså®‰å…¨æ¨¡å¼ï¼Œå¯ä»¥ç”¨äºæ‰¾å›å¯†ç ç­‰æ“ä½œã€‚
# è¿è¡Œçº§åˆ«2 ä¸å¸¦ç½‘ç»œçš„å¤šç”¨æˆ·ï¼Œè¿™ç§æ˜¯ä¸èƒ½è”ç½‘çš„ã€‚
# è¿è¡Œçº§åˆ«3 å®Œæ•´çš„å¤šç”¨æˆ·æ¨¡å¼multi-user.targetï¼Œæˆ‘ä»¬å¹³å¸¸ä½¿ç”¨çš„æ¨¡å¼
# è¿è¡Œçº§åˆ«4 ä¿ç•™
#è¿è¡Œçº§åˆ«5 æ¡Œé¢æ¨¡å¼graphica1.targetï¼Œæ¡Œé¢ç‰ˆç³»ç»Ÿå°±æ˜¯è¿™ä¸ªæ¨¡å¼ï¼Œå¦‚æœä¸æƒ³å¼€æœºè¿›å…¥å›¾å½¢åŒ–ç•Œé¢ï¼Œå°±éœ€è¦ä¿®æ”¹è¿è¡Œçº§åˆ«ï¼Œå¯ä»¥è¯•ä¸€ä¸‹
# è¿è¡Œçº§åˆ«6 é‡å¯

# åˆ‡æ¢è¿è¡Œçº§åˆ«
init
# æ‰§è¡Œinit6ï¼Œå°±ä¼šé‡å¯ï¼Œæ‰§è¡Œinit0å°±ä¼šå…³æœº
# æŸ¥çœ‹è¿è¡Œçº§åˆ«
systemctl get-default
# è®¾ç½®è¿è¡Œçº§åˆ«ï¼Œè®¾ç½®ä¹‹åä¸€é‡å¯å°±æ”¹å˜äº†
systemctl set-default graphical.target # è®¾ç½®é»˜è®¤è¿è¡Œçº§åˆ«ä¸ºå›¾å½¢ï¼Œæ³¨æ„æ²¡æœ‰å®‰è£…å›¾å½¢åŒ–ç•Œé¢å·¥å…·çš„è¯æ˜¯ä¸èƒ½åˆ‡æ¢ä¸ºæ¡Œé¢ç‰ˆçš„
systemctl set-default multi-user.target # è®¾ç½®é»˜è®¤è¿è¡Œçº§åˆ«ä¸ºå‘½ä»¤è¡Œ
```



### æƒé™æ©ç 

```zsh
# æŸ¥çœ‹æ©ç å€¼
umask
# è¿™ä¸ªå€¼å°±å†³å®šç€æˆ‘ä»¬åˆ›å»ºæ–‡ä»¶çš„åˆå§‹æƒé™
022
#å¯ä»¥çœ‹åˆ°ï¼Œç›®å½•çš„åˆå§‹æƒé™ä¸º755ï¼Œæ–‡ä»¶çš„åˆå§‹æƒé™ä¸º644ã€‚è¿™äº›æƒé™éƒ½æ˜¯é€šè¿‡umaskæ©ç è®¡ç®—å¾—æ¥çš„ã€‚
#æ–‡ä»¶æƒé™è®¡ç®—ï¼š0666-0022=0644
#ç›®å½•æƒé™è®¡ç®—ï¼š0777-0022=0755

# ä¿®æ”¹æ–‡ä»¶vim/etc/profileï¼Œæ‰¾åˆ°umaskæ¥ä¿®æ”¹
rooté»˜è®¤æƒé™æ©ç 022
æ™®é€šç”¨æˆ·é»˜è®¤æƒé™æ©ç 002
```



### ç‰¹æ®Šæƒé™

**suid**

suidï¼Œå°±æ˜¯æŸä¸ªå¯æ‰§è¡Œæ–‡ä»¶æœ‰superè¶…çº§ç®¡ç†å‘˜æƒé™ï¼Œè¿™ä¸ªæ–‡ä»¶æ™®é€šç”¨æˆ·ä¹Ÿèƒ½ç”¨ï¼Œå«æœ‰suidçš„æ–‡ä»¶ï¼Œå¯ä»¥è®©æ™®é€šç”¨æˆ·æ‹¥æœ‰è¯¥æ–‡ä»¶å±ä¸»çš„æ‰§è¡Œæƒé™ï¼Œä¸»è¦é’ˆå¯¹çš„æ˜¯å‘½ä»¤æ–‡ä»¶ã€‚æ¯”å¦‚ï¼š

```zsh
# suidä»¤æ™®é€šç”¨æˆ·ä¸´æ—¶å€Ÿç”¨rootç”¨æˆ·çš„æƒé™
chmod u+s /usr/sbin/passwd

```



**suå’Œsudo**

```zsh
# åˆ‡æ¢ç”¨æˆ·
su ç”¨æˆ· # å½“å‰ç›®å½•åˆ‡æ¢
su - ç”¨æˆ· # åˆ‡æ¢åˆ°å®¶ç›®å½•
# æ¨å‡º:exit

# sudoå…¨ç§°ï¼šsuperuserdoï¼Œå®ƒçš„ä½œç”¨æ˜¯ç”¨æ¥æˆæƒçš„ã€‚å°±æ˜¯ç»™æ™®é€šç”¨æˆ·é«˜çº§æƒé™ç”¨çš„ã€‚åŸå› å°±æ˜¯å¾ˆå¤šçš„æ“ä½œï¼Œå¦‚æœéƒ½éœ€è¦rootç”¨æˆ·å»åšï¼Œå¤ªéº»çƒ¦äº†ï¼Œæ‰€ä»¥å¯ä»¥ç»™æ™®é€šç”¨æˆ·åšä¸€äº›æˆæƒï¼Œæ™®é€šç”¨æˆ·æ“ä½œå°±æ–¹ä¾¿äº†ã€‚æˆæƒå°±ç”¨åˆ°äº†sudoï¼ŒSudoå¹¶ä¸æ˜¯ä¸€ä¸‹å­ç»™ç”¨æˆ·å¾ˆå¤šæƒé™ï¼Œè€Œæ˜¯ä¸€ä¸ªå‘½ä»¤ä¸€ä¸ªå‘½ä»¤çš„æˆæƒã€‚

# rootç”¨æˆ·æ‰èƒ½ä¿®æ”¹è¿™ä¸ªé…ç½®ã€‚
1.é…ç½®/etc/sudoers
# ç”¨æˆ·åæ‰€æœ‰ç»ˆç«¯=è¿è¡Œçš„ç”¨æˆ·èº«ä»½å‘½ä»¤ALLï¼ŒALLæ˜¯æ‰€æœ‰æŒ‡ä»¤ï¼Œä¸èƒ½ç»™æ‰€æœ‰çš„ï¼Œä¸ç„¶æƒé™å¤ªé«˜äº†
jaden ALL=(ALL:ALL)		/bin/systemctl,/usr/bin/vim,/usr/sbin/reboot 
# å•ç‹¬ç»™æŒ‡ä»¤æƒé™ï¼Œè€Œä¸”è¦å†™æŒ‡ä»¤çš„ç»å¯¹è·¯å¾„ï¼Œé€—å·åˆ†å‰²
# ä¿®æ”¹å®Œé…ç½®æ–‡ä»¶ï¼Œä¿å­˜é€€å‡ºä¹‹åï¼Œç«‹é©¬å°±ç”Ÿæ•ˆäº†ï¼Œä¸éœ€è¦é‡å¯æˆ–è€…é‡æ–°ç™»å½•ã€‚
# åˆ‡æ¢åˆ°æ™®é€šç”¨æˆ·ï¼ŒæŸ¥çœ‹å¯ä»¥ä½¿ç”¨çš„æˆæƒå‘½ä»¤
sudo -1
[jaden@localhost ~]S sudo -1
æˆ‘ä»¬ä¿¡ä»»æ‚¨å·²ç»ä»ç³»ç»Ÿç®¡ç†å‘˜é‚£é‡Œäº†è§£äº†æ—¥å¸¸æ³¨æ„äº‹é¡¹ã€‚
æ€»ç»“èµ·æ¥æ— å¤–ä¹è¿™ä¸‰ç‚¹ï¼š
#1ï¼‰å°Šé‡åˆ«äººçš„éšç§ã€‚
#2ï¼‰è¾“å…¥å‰è¦å…ˆè€ƒè™‘ï¼ˆåæœå’Œé£é™©)ã€‚
#3ï¼‰æƒåŠ›è¶Šå¤§ï¼Œè´£ä»»è¶Šå¤§ã€‚
```



### sudoææƒ

```zsh
vim # å‘½ä»¤æ¨¡å¼æ‰§è¡Œï¼šï¼/
	# é€šè¿‡vimä¿®æ”¹/etc/sudoersï¼ŒæˆæƒALL
	# å†é€šè¿‡vimè¿›å…¥ä¸€ä¸ªæ–‡ä»¶
	# :è¾“å…¥æŒ‡ä»¤ï¼Œæ˜¯å¯ä»¥ç›´æ¥è¾“å…¥ç³»ç»ŸæŒ‡ä»¤çš„ï¼Œå‰é¢åŠ ä¸€ä¸ªï¼å³å¯ï¼Œæ¯”å¦‚åˆ›å»ºä¸€ä¸ªæ–‡ä»¶ï¼Œï¼touch3.txt
	# æŸ¥çœ‹3.txtä¿¡æ¯å¦‚ä¸‹
	
[jaden@localhost ~]s 11
æ€»ç”¨é‡0
-rw-r--r--1rootroot03æœˆ2717:053.txt#ä»¥rootç”¨æˆ·èº«ä»½åˆ›å»ºçš„æ–‡ä»¶
#å¦‚æœåœ¨vimæ–‡ä»¶æ—¶ï¼Œæ‰§è¡Œï¼/bin/bashï¼Œå°±è¿›å…¥åˆ°äº†rootçš„å‘½ä»¤ç»ˆç«¯ï¼Œå¯ä»¥ä¸ºæ‰€æ¬²ä¸ºã€‚
#è¿™å°±æ˜¯sudoææƒï¼Œä½†æ˜¯sudoææƒéœ€è¦å€ŸåŠ©åˆ°å¯ä»¥æ‰§è¡Œç³»ç»ŸæŒ‡ä»¤çš„äº¤äº’å¼çš„åŠŸèƒ½ï¼Œæ¯”å¦‚vimã€‚

ç¤ºä¾‹2ï¼š
find
# sudo find . -exec bash \ï¼›#ç›´æ¥è¿›å…¥rootçš„å‘½ä»¤ç»ˆç«¯ï¼Œè¿™ä¸ªæŒ‡ä»¤é€€å‡ºrootç»ˆç«¯å¯èƒ½è¦é€€å¥½å‡ æ¬¡æ‰è¡Œï¼Œçœ‹findæ‰¾åˆ°äº†å‡ ä¸ªæ–‡ä»¶ï¼Œæ‰¾åˆ°äº†3ä¸ªæ–‡ä»¶ï¼Œå°±è¾“å…¥ä¸‰æ¬¡exitæ‰èƒ½é€€å‡ºã€‚

ç¤ºä¾‹3ï¼š
awk 
# sudo awkâ€˜BEGIN {system("/bin/bash")}â€™ jaden.txt#ç›´æ¥è¿›å…¥åˆ°rootå‘½ä»¤ç»ˆç«¯ï¼Œexitç›´æ¥é€€å‡ºã€‚

# è¿˜æœ‰å¥½å¤šæŒ‡ä»¤å¯ä»¥ææƒï¼Œæ¯”å¦‚cpå‘½ä»¤ä¹Ÿå¯ä»¥ææƒï¼Œå°†å…¶ä»–ç”µè„‘ä¸Šçš„/etc/shadowæ–‡ä»¶æ‹·è´åˆ°è¿™ä¸ªç³»ç»Ÿä¸­ï¼Œå¯†ç å°±æ”¹æ‰äº†ï¼Œå†suåˆ‡æ¢åˆ°rootå³å¯ç­‰ç­‰ï¼Œè¿˜æœ‰ä»€ä¹ˆmvã€viã€sedä¿®æ”¹æ–‡ä»¶ã€chmodæ”¹é‡è¦æ–‡ä»¶æƒé™ç­‰ç­‰è¿™é‡Œå°±ä¸å¤šæäº†ã€‚å¤§å®¶å¯ä»¥è¯•è¯•ï¼Œæ™®é€šç”¨æˆ·ä½¿ç”¨sudoæ¥ä¿®æ”¹shadowæ–‡ä»¶çš„rootç”¨æˆ·çš„å¯†ç ã€‚
```



### è„ç‰›ææƒ

```zsh
# dcowå…¨ç§°dirtycowï¼Œè„ç‰›ï¼ŒåŸç†ï¼šLinuxå†…æ ¸çš„å†…å­˜å­ç³»ç»Ÿåœ¨å¤„ç†å†™å…¥æ—¶å¤åˆ¶ï¼ˆcopy-on-write,Cowï¼Œç»„åˆèµ·æ¥æ˜¯ç‰›çš„æ„æ€ï¼‰æ—¶äº§ç”Ÿäº†ç«äº‰æ¡ä»¶ã€‚æ¶æ„ç”¨æˆ·å¯åˆ©ç”¨æ­¤æ¼æ´ï¼Œæ¥è·å–é«˜æƒé™ï¼Œå¯¹åªè¯»å†…å­˜æ˜ å°„è¿›è¡Œå†™è®¿é—®ï¼Œæ‰€ä»¥å¤§å®¶éƒ½ç®¡è¿™ä¸ªææƒæ–¹å¼å«åšè„ç‰›ææƒã€‚åŸç†è¿™ä¸€å—å¤§å®¶ä¸éœ€è¦æŒæ¡ï¼Œä¼šç›‘æµ‹æ˜¯å¦å­˜åœ¨è¿™ä¸ªæ¼æ´å³å¯ã€‚

# åˆ©ç”¨å·¥å…·
https://github.com/gbonacini/CVE-2016-5195

# git cloneä¸‹æ¥å
make
./dcow -s 
```



## ç”¨æˆ·ä¸æƒé™

### ç”¨æˆ·å’Œç”¨æˆ·ç»„

![image-20250724220904708](assets/image-20250724220904708.png)



### ç”¨æˆ·ç®¡ç†

```zsh
# åˆ›å»ºä¸€ä¸ªç”¨æˆ·
useradd test1
# æŒ‡å®šç»„åˆ›å»ºç”¨æˆ·
useradd test1 -g test1
# åˆ é™¤ä¸€ä¸ªç”¨æˆ·,åŒæ—¶åˆ é™¤å®¶ç›®å½•çš„ç”¨æˆ·æ–‡ä»¶å¤¹
userdel -r test1

# è®¾ç½®å¯†ç 
passwd test1

# æŸ¥çœ‹ä¸€ä¸ªç”¨æˆ·æ˜¯å¦å­˜åœ¨
id test1

# æŸ¥çœ‹ç”¨æˆ·çŠ¶æ€
lchage -l test1

# æ›´æ”¹ç”¨æˆ·çŠ¶æ€
usermod -L test1 # ç¦ç”¨/é”å®šç”¨æˆ·
usermod -U test1 # è§£é”ç”¨æˆ·
usermod -g ç»„ ç”¨æˆ· # ä¿®æ”¹ä¸»ç»„
usermod -G ç»„ ç”¨æˆ· # ä¿®æ”¹ä»å±ç»„

# /etc/passwd å­˜åœ¨å“ªäº›ç”¨æˆ·,å¤šä¸€ä¸ªç”¨æˆ·å°±å¤šä¸€è¡Œè®°å½•
# /etc/shadow ç”¨æˆ·å¯†ç ,åŠ å¯†

# æŸ¥çœ‹å“ªäº›ç”¨æˆ·è¿æ¥
w

07:44:40 up 19 min,  1 user,  load average: 0.00, 0.00, 0.00
USER     TTY       LOGIN@   IDLE   JCPU   PCPU  WHAT
root     pts/1     07:25   19:13   0.11s  0.11s -zsh

# tty1:æœ¬åœ°è¿æ¥,pts/1:è¿œç¨‹è¿æ¥

# åˆ‡æ¢ç”¨æˆ· (su = substitute user)
su -  # åˆ‡æ¢åˆ°root
su - username  # åˆ‡æ¢åˆ°æŒ‡å®šç”¨æˆ·

```



### ç”¨æˆ·ç»„ç®¡ç†

```zsh
# /etc/group æŸ¥çœ‹æœ‰å¤šå°‘ä¸ªç”¨æˆ·ç»„

# æ·»åŠ ç»„
groupadd test1

# ä¿®æ”¹ç»„
groupmod -n æ–°ç»„å æ—§ç»„å # ä¿®æ”¹ç»„å
```



### æƒé™ç®¡ç†

#### **æ–‡ä»¶æƒé™**

```zsh
# æŸ¥çœ‹æ–‡ä»¶æƒé™
ls -l /tmp/1.txt

-rw-r--r-- 1 root root 3.6K Jul 23 11:39 1.txt
# ç¬¬ä¸€æ®µçš„ç¬¬ä¸€ä¸ªå­—ç¬¦ï¼Œè¡¨ç¤ºæ–‡ä»¶ç±»å‹-æ–‡ä»¶ã€dç›®å½•ã€1è½¯é“¾æ¥ï¼ˆå¯¹åº”ç€windowså¿«æ·æ–¹å¼ï¼‰ã€bå—è®¾å¤‡ï¼ˆls/devï¼Œå¯ä»¥çœ‹åˆ°ç¡¬ç›˜sdaç­‰ï¼‰
# ç¬¬ä¸€æ®µç¬¬2-4å­—ç¬¦ï¼Œè¡¨ç¤ºè¯¥æ–‡ä»¶æ‰€å±ç”¨æˆ·çš„æƒé™
# ç¬¬ä¸€æ®µç¬¬5-7å­—ç¬¦ï¼Œè¡¨ç¤ºè¯¥æ–‡ä»¶æ‰€å±ç”¨æˆ·ç»„çš„æƒé™
# ç¬¬ä¸€æ®µç¬¬8-10å­—ç¬¦ï¼Œè¡¨ç¤ºå…¶ä»–ç”¨æˆ·å¯¹è¯¥æ–‡ä»¶çš„æƒé™
# ç¬¬ä¸€ä¸ªè‹±æ–‡:ç”¨æˆ· ç¬¬äºŒä¸ªè‹±æ–‡:ç»„
# ç¬¬11ä¸ªå­—ç¬¦æ˜¯. è¡¨ç¤ºå¼€å¯äº†selinux

r 4ä»£è¡¨è¯»æƒé™read
w 2ä»£è¡¨å†™æƒé™write
x 1ä»£è¡¨å¯æ‰§è¡Œæƒé™executable
- 0ç©ºæƒé™ä½ï¼Œè¡¨ç¤ºæ²¡æœ‰è¿™ä¸ªæƒé™ï¼Œ9ä½æƒé™ä¸èƒ½å°‘ï¼Œæ²¡æœ‰çš„æƒé™å°±ç”¨-ä»£æ›¿ã€‚

æƒé™å€¼è¡¨
0 ---
1 --x
2 -w-
3 -wx
4 r--
5 r-x
6 rw-
7 rwx

ugoæƒé™ä½“ç³»ï¼š
	rw-		r--  	r--
	user	group	other

# æ›´æ”¹æ–‡ä»¶æƒé™ (chmod = change mode)
chmod 755 script.sh  # è®¾ç½®æƒé™ä¸ºrwxr-xr-x
chmod +x exploit.py  # æ·»åŠ å¯æ‰§è¡Œæƒé™
chmod -x exploit.py  # å»æ‰å¯æ‰§è¡Œæƒé™
chmod o-r 1.txt      # otherå»æ‰è¯»æƒé™
chmod g-x exploit.py # groupå»æ‰æ‰§è¡Œæƒé™

# æ›´æ”¹æ–‡ä»¶æ‰€æœ‰è€… (chown = change owner)
sudo chown root:root /etc/shadow  # å±ä¸»:å±ç»„

# ä»¥rootæƒé™æ‰§è¡Œå‘½ä»¤ (sudo = superuser do)
sudo apt update  # ä»¥rootæƒé™è¿è¡Œ

# æŸ¥çœ‹æ–‡ä»¶æ—¶é—´
stat æ–‡ä»¶/æ–‡ä»¶å¤¹
```



#### **ç›®å½•æƒé™**

```zsh
æ–‡ä»¶æƒé™ï¼šrwxè¯»å†™æ‰§è¡Œ

ç›®å½•çš„æƒé™ï¼šrwx
rè¡¨ç¤ºå¯ä»¥æŸ¥çœ‹ç›®å½•ä¸‹æœ‰å“ªäº›æ–‡ä»¶
xè¡¨ç¤ºå¯ä»¥cdåˆ‡æ¢åˆ°è¯¥ç›®å½•
wè¡¨ç¤ºå¯ä»¥åœ¨ç›®å½•ä¸­åˆ›å»ºã€ä¿®æ”¹ã€åˆ é™¤æ–‡ä»¶ç­‰æ“ä½œ

ä¸ºäº†å®‰å…¨æ“ä½œï¼š
æ–‡ä»¶æƒé™é»˜è®¤ï¼š644æƒé™ã€ç‹ ä¸€ç‚¹å°±ç»™600æƒé™
ç›®å½•æƒé™é»˜è®¤ï¼š755æƒé™ã€ç‹ ä¸€ç‚¹å°±ç»™700æƒé™
```





### å¯æ‰§è¡Œç¨‹åºç‰¹æ®Šç›®å½•(ç¯å¢ƒå˜é‡)

```zsh
# æŸ¥çœ‹ç¯å¢ƒå˜é‡
echo $PATH

# å°†å¯æ‰§è¡Œæ–‡ä»¶æ·»åŠ åˆ°è¿™äº›ç›®å½•ä¸­,å¯ä»¥ç›´æ¥æ‰§è¡Œå‘½ä»¤
```



## æŸ¥çœ‹ä¸ç¼–è¾‘

```zsh
# æ­£åºæŸ¥çœ‹
cat xxx.txt
# æ˜¾ç¤ºè¡Œå·
cat -n xxx.txt
# å€’åºæŸ¥çœ‹
tac xxx.txt
# æŸ¥çœ‹å‰10è¡Œ
head xxx.txt
# æŸ¥çœ‹å‰äº”è¡Œ
head -5 xxx.txt
# æŸ¥çœ‹ååè¡Œ
tail xxx.txt
# æŸ¥çœ‹åäº”è¡Œ
tail -5 xxx.txt
# ç›‘æ§
tail -f /tmp/xxx.txt
```



## ç¼–ç ä¸è§£ç 

```zsh
# base64
# ç¼–ç 
echo "The password is IFukwKGsFW8MOq3IRFqrxE1hxTNEbUPR" | base64
# è§£ç 
base64 -d data.txt
echo "VGhlIHBhc3N3b3JkIGlzIElGdWt3S0dzRlc4TU9xM0lSRnFyeEUxaHhUTkViVVBSCg==" | base64 -d

# --------------------

# xxd:åå…­è¿›åˆ¶è½¬å‚¨å·¥å…·
```



## å‹ç¼©ä¸è§£å‹

```zsh
# æŒ‡å®šç›®å½•è§£å‹tar.gzæ–‡ä»¶
tar -xzf archive.tar.gz -C /home/andy/backup # -x è§£å‹ï¼Œ-z gzipï¼Œ-v è¯¦ç»†ï¼Œ-f æ–‡ä»¶

# åˆ›å»ºtar.gzå‹ç¼©åŒ…
tar -czf /home/jack/backup.tar.gz /home/andy/backup

# gzipå‹ç¼©(ä¸ä¿ç•™æºæ–‡ä»¶)
gzip 1.txt

# gzipè§£å‹(ä¸ä¿ç•™æºæ–‡ä»¶)
gzip -d 1.txt.gz

# è§£å‹zipæ–‡ä»¶
unzip file.zip

# åˆ›å»ºzipå‹ç¼©åŒ…
zip -r backup.zip 1.txt 2.txt

# å‹ç¼©rar
rar a å‹ç¼©æ–‡ä»¶å.rar æ–‡ä»¶æˆ–ç›®å½•

# è§£å‹rar
rar x å‹ç¼©æ–‡ä»¶.rar
```



## ç³»ç»Ÿ

```zsh
# æŸ¥çœ‹cpu
lscpu

# æ˜¾ç¤ºå†…å­˜ä½¿ç”¨æƒ…å†µ
free -h

#total=used +free +buffers+ cache
#totalï¼šæ‰€æœ‰å¯ç”¨å†…å­˜
#usedï¼šå·²ç»ä½¿ç”¨çš„å†…å­˜
#freeï¼šæ²¡æœ‰ä½¿ç”¨å†…å­˜
#sharedï¼šä»…ä¸ºå…¼å®¹è®¾ç½®ï¼Œå¯ä»¥å¿½ç•¥
#buffï¼šä½œä¸ºbuffercacheçš„å†…å­˜ï¼Œæ˜¯å—è®¾å¤‡çš„è¯»å†™ç¼“å†²åŒº
#cacheï¼šä½œä¸ºpagecacheçš„å†…å­˜ï¼Œæ–‡ä»¶ç³»ç»Ÿçš„cache
#availableï¼æ— éœ€äº¤æ¢å³å¯ç”¨äºå¯åŠ¨æ–°åº”ç”¨ç¨‹åºçš„å†…å­˜é‡ä¼°è®¡å€¼ã€‚

# æ˜¾ç¤ºç£ç›˜ä½¿ç”¨æƒ…å†µ (df = disk free)
df -h  # -h äººç±»å¯è¯»æ ¼å¼
df -ih # -h äººç±»å¯è¯»æ ¼å¼ -i æŸ¥çœ‹inodeç©ºé—´

# ç³»ç»Ÿä¼˜åŒ–
# æ˜¾ç¤ºç³»ç»Ÿä¿¡æ¯ (uname = unix name)
uname -a  # -a æ˜¾ç¤ºæ‰€æœ‰ä¿¡æ¯

# æ˜¾ç¤ºç›®å½•/æ–‡ä»¶å ç”¨ç©ºé—´ (du = disk usage)
du -sh ~/Downloads/  # -s æ€»è®¡ï¼Œ-h äººç±»å¯è¯»

# æ˜¾ç¤ºç³»ç»Ÿè¿è¡Œæ—¶é—´å’Œè´Ÿè½½
uptime
```



## è¿›ç¨‹

```zsh
# æ˜¾ç¤ºè¿›ç¨‹ä¿¡æ¯ (ps = process status)
ps -ef

# pidï¼šå…¨ç§°processidï¼Œæ˜¯è¿›ç¨‹ç¼–å·ï¼Œæ¯æ¬¡å¯åŠ¨æŸä¸ªç¨‹åºï¼Œå®ƒçš„ç¼–å·å¯èƒ½éƒ½ä¸ä¸€æ ·ï¼Œè¿™ä¸ªæ˜¯ç¨‹åºå¯åŠ¨ä¹‹åç³»ç»Ÿéšæœºåˆ†é…çš„ã€‚
# uidï¼šå…¨ç§°useridï¼Œæ˜¯è¿›ç¨‹æ‰€å±ç”¨æˆ·ï¼Œä¹Ÿå°±æ˜¯å“ªä¸ªç”¨æˆ·å¯åŠ¨çš„ï¼Œæˆ‘ä»¬å¯ä»¥åˆ‡æ¢ä¸ªç”¨æˆ·æ‰§è¡Œä¸€ä¸‹sleep60ï¼Œå°±å¯ä»¥çœ‹åˆ°æ•ˆæœ
# CMDä¸­çœ‹åˆ°æ‹¬èµ·æ¥çš„ï¼Œè¡¨ç¤ºè¿™äº›éƒ½æ˜¯ç³»ç»Ÿçº§åˆ«çš„è¿›ç¨‹ï¼Œæ¯”å¦‚ä¸€äº›ç¡¬ä»¶é©±åŠ¨ç¨‹åºä¹‹ç±»çš„ï¼Œè¿™äº›éƒ½ä¸è¦åŠ¨ã€‚ä¸å¸¦å£çš„éƒ½æ˜¯ç”¨æˆ·çº§åˆ«çš„ã€‚
# ppidï¼šå…¨ç§°parentprocessidï¼Œçˆ¶è¿›ç¨‹ï¼Œè®°å½•çš„æ˜¯æŸä¸ªè¿›ç¨‹æ˜¯ç”±å“ªä¸ªè¿›ç¨‹åˆ›å»ºå‡ºæ¥çš„ã€‚å¯ä»¥é€šè¿‡pstreeå·¥å…·æ¥æŸ¥çœ‹ä»å±å…³ç³»ã€‚
# Cï¼šè¿™ä¸ªä¸ç”¨ç®¡ã€‚
# STIMEï¼šå…¨ç§°starttimeï¼Œè¿›ç¨‹çš„å¯åŠ¨æ—¶é—´ã€‚
# TTYï¼šç”¨æ¥æ˜¾ç¤ºå“ªäº›æ˜¯æœ¬åœ°å¯åŠ¨çš„ï¼Œå“ªäº›æ˜¯è¿œç¨‹ç»ˆç«¯è¿æ¥ä¸Šæ¥å¯åŠ¨çš„ã€‚é€šè¿‡wæŒ‡ä»¤å¯ä»¥çœ‹åˆ°å“ªäº›ç»ˆç«¯ç™»å½•ç€ä¸»æœºã€‚åªè¦ç™»å½•æˆåŠŸä¸€ä¸ªç»ˆç«¯ï¼Œé‚£å°±å¤šä¸ªç»ˆç«¯ã€‚
# TIMEï¼šè¿™ä¸ªæ²¡å•¥ç”¨
# CMDï¼šè¿™ä¸ªè¿›ç¨‹æ‰§è¡Œäº†ä»€ä¹ˆæŒ‡ä»¤ã€‚

# æŸ¥çœ‹è¿›ç¨‹çš„ä»å±å…³ç³»
pstree

# æŸ¥æ‰¾è¿›ç¨‹ (pgrep = process grep)
pgrep -l sshd  # æŸ¥æ‰¾sshdè¿›ç¨‹

# ç»“æŸè¿›ç¨‹ (kill)
kill 1234 # ç»“æŸä¸€ä¸ªè¿›ç¨‹
pkill top # æ‰¹é‡ç»“æŸæ‰€æœ‰topè¿›ç¨‹
# kill -9ï¼Œè¿™ä¸ªå¼ºå¤§å’Œå±é™©çš„å‘½ä»¤è¿«ä½¿è¿›ç¨‹åœ¨è¿è¡Œæ—¶çªç„¶ç»ˆæ­¢ï¼Œè¿›ç¨‹åœ¨ç»“æŸåä¸èƒ½è‡ªæˆ‘æ¸…ç†ã€‚å±å®³æ˜¯å¯¼è‡´ç³»ç»Ÿèµ„æºæ— æ³•æ­£å¸¸é‡Šæ”¾ï¼Œä¸€èˆ¬ä¸æ¨èä½¿ç”¨ï¼Œé™¤éå…¶ä»–åŠæ³•éƒ½æ— æ•ˆã€‚
kill -9 1234  # å¼ºåˆ¶ç»“æŸPIDä¸º1234çš„è¿›ç¨‹

# åŠ¨æ€æŸ¥çœ‹è¿›ç¨‹ (top)
top
htop  # æ›´å‹å¥½çš„æ›¿ä»£å“

#08ï¼š34ï¼š27up20minï¼š08ï¼š34ï¼š27è¡¨ç¤ºtopæŒ‡ä»¤çš„æ‰§è¡Œæ—¶é—´ï¼Œæ¯3ç§’è‡ªåŠ¨åˆ·æ–°ä¸€æ¬¡ï¼Œup20minï¼šå¼€æœºäº†20åˆ†é’Ÿï¼Œå¦‚æœçœ‹åˆ°3ï¼š20ï¼Œè¡¨ç¤ºå¼€æœºäº†3å°æ—¶20åˆ†é’Ÿï¼Œçœ‹åˆ°10daysè¡¨ç¤º10å¤©äº†ï¼Œ1inuxå¾ˆç¨³å®šè€ç”¨ï¼Œå¼€æœºå¥½å¤šå¹´éƒ½ç¨³å®šè¿è¡Œç€ï¼Œä¸ä¼šå¡é¡¿ã€‚
#1userï¼šè¡¨ç¤ºå½“å‰åªæœ‰ä¸€ä¸ªç”¨æˆ·åœ¨ä½¿ç”¨
#1oadaverageï¼š0.00ï¼Œ0.01ï¼Œ0.05ï¼šå¹³å‡è´Ÿè·ï¼ŒæŒ‡çš„æ˜¯cPUçš„è´Ÿè½½é«˜ä¸é«˜ï¼ŒcPuè´Ÿè½½é«˜ï¼Œé‚£ä¹ˆå¹³å‡è´Ÿè·å°±æ¯”è¾ƒå¤§ï¼Œå¦‚æœè¿™å‡ ä¸ªå€¼å¾ˆå¤§çš„æ—¶å€™ï¼ŒæœåŠ¡å™¨ä¼šå˜å¾—å¾ˆå¡ã€‚å¦‚æœå‘ç°æœåŠ¡å™¨å¡äº†ï¼Œå°±æ˜¯å¼‚å¸¸æƒ…å†µï¼Œå°±å¯ä»¥çœ‹çœ‹è¿™ä¸ªæ•°æ®ã€‚è¿™ä¸‰ä¸ªå€¼è¡¨ç¤ºï¼š1åˆ†é’Ÿã€5åˆ†é’Ÿã€15åˆ†é’Ÿçš„è´Ÿè½½æƒ…å†µï¼Œ1oadaverageæ•°æ®æ˜¯æ¯éš”5ç§’é’Ÿæ£€æŸ¥ä¸€æ¬¡æ´»è·ƒçš„è¿›ç¨‹æ•°ï¼Œç„¶åæŒ‰ç‰¹å®šç®—æ³•è®¡ç®—å‡ºçš„æ•°å€¼ã€‚å¦‚æœè¿™ä¸ªæ•°é™¤ä»¥é€»è¾‘cPUçš„æ•°é‡ï¼Œç»“æœé«˜äº5çš„æ—¶å€™å°±è¡¨æ˜ç³»ç»Ÿåœ¨è¶…è´Ÿè·è¿è½¬äº†ã€‚
#Tasksï¼š89tota1ï¼Œ2runningï¼Œ87sleepingï¼Œ0stoppedï¼Œ0zombieï¼šè¡¨ç¤ºè¿›ç¨‹æ•°é‡ï¼Œæ€»å…±89ä¸ªï¼Œ2ä¸ªæ­£åœ¨è¿è¡Œï¼Œ87ä¸ªåœ¨ç¡çœ çŠ¶æ€ï¼Œå½“æˆ‘ä»¬çš„cPUæ˜¯1æ ¸çš„æ—¶å€™ï¼Œæ˜¯åœ¨æ‰€æœ‰è¿›ç¨‹ä¹‹é—´æ¥å›åˆ‡æ¢æ‰§è¡Œï¼Œæ‰€ä»¥åªæœ‰ä¸€ä¸ªæˆ–è€…åˆ‡æ¢é€Ÿåº¦å¾ˆå¿«çš„æ—¶å€™æ˜¾ç¤º2ä¸ªã€‚0stoppedè¡¨ç¤ºåœæ­¢çš„è¿›ç¨‹ï¼Œä½†æ˜¯è¿™é‡Œä¸€èˆ¬éƒ½æ˜¯0ï¼Œä»¥ä¸ºè¿›ç¨‹ç»“æŸä¹‹åä¼šè‡ªåŠ¨ä»å†…å­˜ä¸­é‡Šæ”¾ã€‚0zombieè¡¨ç¤ºåƒµå°¸è¿›ç¨‹æ•°é‡ï¼Œåƒµå°¸è¿›ç¨‹æ˜¯æ€ä¸æ­»çš„ï¼Œå°±æ˜¯ç”±äºå„ç§åŸå› ï¼Œç³»ç»Ÿæ— æ³•è‡ªåŠ¨é‡Šæ”¾çš„è¿›ç¨‹ï¼Œåƒµæˆ·è¿›ç¨‹ä¹Ÿæ¶ˆè€—ç³»ç»Ÿèµ„æºï¼Œä¸€èˆ¬ki11æ‰å®ƒçš„çˆ¶è¿›ç¨‹å¯ä»¥æ€æ‰åƒµå°¸è¿›ç¨‹ï¼Œæˆ–è€…ki11-9æ¥æ€æ‰ã€‚ä½†æ˜¯ki11-9è¦æ…ç”¨ï¼ï¼ï¼å®ƒä¹Ÿå®¹æ˜“äº§ç”Ÿåƒµæˆ·è¿›ç¨‹ï¼Œki11ä¼šå°†è¿›ç¨‹è¿è¡Œä¸­çš„ä¿¡æ¯ä¿å­˜ä¸‹æ¥ï¼Œè¿›ç¨‹ä¸ä¼šå‡ºé—®é¢˜ï¼Œki11-9ä¸ä¼šä¿å­˜ï¼Œå¼ºåˆ¶ç»“æŸè¿›ç¨‹çš„è¿è¡Œï¼Œå®¹æ˜“å‡ºç°åƒµå°¸è¿›ç¨‹ã€‚
#æŒ‰æ•°å­—1ï¼Œå¯ä»¥æŸ¥çœ‹cpuæ•°é‡
#%Cpu(s)ï¼š0.0usï¼Œ0.0syï¼Œ0.0niï¼Œ100.0idï¼Œ0.0waï¼Œ0.0hiï¼Œ0.0siï¼Œ0.0stï¼Œå…³äºcpuæˆ‘ä»¬å…¶ä»–å‚æ•°ä¸ç”¨çœ‹ï¼Œå°±çœ‹è¿™ä¸ª100.0idï¼Œidæ˜¯idleçš„ç®€å†™ï¼Œè¡¨ç¤º100%ç©ºé—²ï¼Œå› ä¸ºæˆ‘ä»¬ç°åœ¨cPUä½¿ç”¨ç‡å¾ˆä½ï¼Œæ‰€ä»¥æ˜¾ç¤ºäº†100%ç©ºé—²ã€‚æˆ‘ä»¬åªå…³æ³¨è¿™ä¸ªå‚æ•°å³å¯ï¼Œçœ‹ä¸€ä¸‹CPUå¿™ä¸å¿™å°±è¡Œã€‚
#KiB Mem: 2027872 totalï¼Œ 1779000 freeï¼Œ 135668 used,113204buff/cacheï¼Œæ˜¯å†…å­˜ï¼ˆè‹±æ–‡ï¼šmemroy)çš„æè¿°ä¿¡æ¯ï¼Œtotalè¡¨ç¤ºæ€»å†…å­˜é‡ï¼Œfreeè¡¨ç¤ºå¯ç”¨å‰©ä½™é‡ï¼Œuserdè¡¨ç¤ºå·²ç»ä½¿ç”¨çš„é‡ï¼Œbuff/cacheè¡¨ç¤ºç”¨ä½œç¼“å­˜ï¼Œæ˜¯å’Œç£ç›˜è¿›è¡Œè¯»å†™æ—¶çš„ç¼“å­˜åŒºåŸŸï¼Œè¿™ä¸ªå‚æ•°ä¸ç”¨ç®¡ã€‚
#KiB Swap:0total,o free,0used.1755332avai1Memï¼šSwapè¡¨ç¤ºè™šæ‹Ÿå†…å­˜ï¼Œè¿™æ˜¯ç¡¬ç›˜åˆ†é…ç»™å†…å­˜çš„ä¸€éƒ¨åˆ†ç©ºé—´ï¼Œä¸ºäº†å½“å†…å­˜ä¸è¶³æ—¶ï¼Œä¸´æ—¶å°†ç¡¬ç›˜å½“ä½œå†…å­˜ä½¿ç”¨ã€‚è¿™ä¸ªæ•°å€¼æ˜¯å¯ä»¥è‡ªè¡Œè°ƒæ•´çš„ã€‚ä¸€èˆ¬è‡ªåŠ¨å°±åˆ†é…å¥½äº†ï¼Œæ‰€ä»¥æˆ‘ä»¬ä¸ç”¨ç®¡ï¼Œå®åœ¨æ˜¯å†…å­˜ä¸å¤Ÿç”¨çš„æ—¶å€™å†åŠ å¤§è¿™ä¸ªè™šæ‹Ÿå†…å­˜ã€‚æˆ‘ç°åœ¨çœ‹çš„æ˜¯è™šæ‹Ÿæœºä¸Šçš„è™šæ‹Ÿå†…å­˜ï¼Œè™šæ‹Ÿæœºä¸è®¾ç½®è™šæ‹Ÿå†…å­˜ï¼Œæ‰€ä»¥æ˜¾ç¤ºä¸º0ã€‚
```



## ç‰¹æ®Šç¬¦å·

```zsh
#:#æ³¨é‡Š
# ~ å®¶ç›®å½•
# . å½“å‰ç›®å½•
# .. ä¸Šçº§ç›®å½•
# / æ ¹ç›®å½•

# æŸ¥çœ‹ç¯å¢ƒå˜é‡
env
# æŸ¥çœ‹æŸä¸ªå˜é‡
echo $XXX
# è®¾ç½®ç¯å¢ƒå˜é‡
export LANG=zh_CN.UTF-8

# echo åŒå¼•å·:è§£æå¹¶ä¸”æ¢è¡Œ
echo "$LANG
dquote> nihao"
zh_CN.UTF-8
nihao

# echo å•å¼•å·:ä¸è§£ææ¢è¡Œ 
echo '$LANG
nihao'
$LANG
nihao

# \/
\ è½¬ä¹‰
/ è·¯å¾„

# ï¼å†å²å‘½ä»¤è°ƒç”¨ï¼Œåœ¨findå‘½ä»¤ä¸­æ˜¯å–åçš„æ„æ€ã€‚
!46 # ç¬¬46æ¡å†å²å‘½ä»¤

# * é€šé…ç¬¦
ls *.txt

# $ è°ƒç”¨å˜é‡ å°å¿ƒä½¿ç”¨
aaa=adny
echo $aaa
adny

# ; åˆ†å‰²æŒ‡ä»¤ åˆ†åˆ«æ‰§è¡Œ
ls ; cat 1.txt

# || çŸ­è·¯ å‰é¢çš„å‘½ä»¤æ‰§è¡Œå¯¹äº†,åé¢çš„å‘½ä»¤å°±ä¸å†æ‰§è¡Œäº†;å‰é¢é”™äº†,åé¢æ‰§è¡Œ
ls || cat 1.txt

# && å‰é¢å¯¹äº†,åé¢ä¹Ÿæ‰§è¡Œ;å‰é¢çš„é”™äº†,åé¢ä¹Ÿä¸æ‰§è¡Œäº†
ls && cat 1.txt

# & åå°æ‰§è¡Œ
top &

# `` åµŒå¥—å‘½ä»¤
mkdir `echo andy` # å…ˆæ‰§è¡Œ echo andy æŒ‡ä»¤ ç„¶åå†mkdir

# æ–‡ä»¶åæ˜¯ç ´æŠ˜å·-
# ç›¸å¯¹è·¯å¾„
cat ./-
# é‡å®šå‘
cat < -
# ç»å¯¹è·¯å¾„
cat /home/bandit1/-

# ä»¥ -å¼€å¤´çš„æ–‡ä»¶ -file.txt
touch -- -file.txt
cat -- -file.txt  # `--` è¡¨ç¤ºâ€œé€‰é¡¹ç»“æŸâ€

# æœ‰ç©ºæ ¼çš„æ–‡ä»¶
cat "spaces in name"  # ç”¨å¼•å·åŒ…è£¹

# æ–‡ä»¶åå«ç‰¹æ®Šç¬¦å·ï¼ˆå¦‚*ã€$ï¼‰
cat "*.txt"  # å¼•å·ç¦ç”¨é€šé…ç¬¦
```



## æœåŠ¡

```zsh
# æŸ¥çœ‹æ‰€æœ‰æœåŠ¡åˆ—è¡¨
systemctl list-unit-files
# å¯åŠ¨æœåŠ¡
systemctl start xxx
# åœæ­¢æœåŠ¡
systemctl stop xxx
# é‡å¯æœåŠ¡
systemctl restart xxx
# æŸ¥çœ‹æœåŠ¡çŠ¶æ€
systemctl status xxx
# è®¾ç½®å¼€æœºè‡ªå¯
systemctl enable xxx.service
# åœæ­¢å¼€æœºè‡ªå¯
systemctl disable xxx.service
```



## å®šæ—¶ä»»åŠ¡

**æ—¶é—´**

```zsh
# æ—¶é—´å‘½ä»¤
date
# æ—¶é—´æ ¼å¼
date +%F\ %T # 2025-07-26 20:08:44
# åŒæ­¥æ—¶é—´
systemctl restart chronyd
# æ”¹æ—¶é—´
date -s '13:23:32'
```

**å®šæœŸæ‰§è¡Œä»»åŠ¡(æ‰§è¡Œå‘½ä»¤)**

```zsh
# å®‰è£…
pacman -S cronie
# å¯åŠ¨
sudo systemctl enable --now cronie

# ä½¿ç”¨
crontab -e # ç¼–å†™æŒ‡ä»¤
crontab -l # çœ‹æœ‰å¤šå°‘æ·»åŠ çš„æŒ‡ä»¤

# å®šæ—¶ä»»åŠ¡çš„æ ¼å¼
* * *  *  *     cmd
åˆ† æ—¶ æ—¥ æœˆ å‘¨  å‘½ä»¤

åˆ†ï¼š0-59
æ—¶ï¼š0-23
æ—¥ï¼š0-31
æœˆï¼š1-12
å‘¨ï¼š1-7

# æ¯5åˆ†é’Ÿæ‰§è¡Œä¸€æ¬¡
*/5 * * * *

# æ¯1å°æ—¶çš„01åˆ†æ‰§è¡Œä¸€æ¬¡
01 */1 * * *

# æ¯åŠä¸ªå°æ—¶æ‰§è¡Œä¸€æ¬¡ï¼Œä¸‹é¢çš„æ„æ€æ˜¯æ¯å°æ—¶çš„00åˆ†å’Œ30åˆ†å„æ‰§è¡Œä¸€æ¬¡
00,30 */1 * * *

# æ¯å¤©æ™šä¸Š8ï¼š00æ‰§è¡Œä¸€æ¬¡
00 20 * * *

# æ¯ä¸ªæœˆ1å·æ™šä¸Š8ï¼š00æ‰§è¡Œ
00 20 1 * *

# æ¯å¹´1æœˆ1å·æ™šä¸Š8ï¼š00æ‰§è¡Œ
00 20 1 1 *

# æ¯å‘¨1,3,5,æ™šä¸Šå…«ç‚¹æ‰§è¡Œ
00 20 * * 1,3,5

#å‡ ä¸ªç¬¦å·çš„æ„æ€ï¼š
#*æ¯åˆ†é’Ÿ
#*/5æ¯5åˆ†é’Ÿ
#05ç¬¬5åˆ†é’Ÿ

#æ¯ç§’é’Ÿæ‰§è¡Œçš„ä»»åŠ¡ï¼Œéœ€è¦å•ç‹¬å†™è„šæœ¬ï¼Œç¹çä¸€äº›ã€‚
```





## æœç´¢å’Œè¿‡æ»¤

### ç®¡é“

ç®¡é“ç¬¦å·ï¼š`|`ï¼Œå¯ä»¥å°†å‰é¢æŒ‡ä»¤çš„æ‰§è¡Œç»“æœï¼Œä½œä¸ºåé¢æŒ‡ä»¤çš„æ“ä½œå†…å®¹ã€‚

ä¾‹å¦‚:å°†ip a ä¸­è¾“å‡ºçš„å†…å®¹ä½œä¸ºtailå‘½ä»¤çš„æ“ä½œå†…å®¹

```zsh
ip a | tail -4
# è¾“å‡º
3: docker0: <NO-CARRIER,BROADCAST,MULTICAST,UP> mtu 1500 qdisc noqueue state DOWN group default
    link/ether 02:c2:15:4d:be:4e brd ff:ff:ff:ff:ff:ff
    inet 172.17.0.1/16 brd 172.17.255.255 scope global docker0
       valid_lft forever preferred_lft forever
```



### æœç´¢

```zsh
# æŸ¥æ‰¾æ–‡ä»¶ (find)
find / -name "*.conf" 2>/dev/null  # æŸ¥æ‰¾æ‰€æœ‰.confæ–‡ä»¶
find . -user bandit7 -group bandit6 -size 33c
```





### è¿‡æ»¤

#### gerp

```zsh
# æŒ‰è¡Œæ¨¡ç³Šè¿‡æ»¤
grep "xxx" xxx.txt
# -w:è¿‡æ»¤å®Œæ•´å•è¯ -n:æ˜¾ç¤ºè¡Œå·
grep -w -n  "apple" xxx.txt
# ç®¡é“è¿‡æ»¤
cat xxx.txt | grep "sss"
# æ­£åˆ™è¡¨è¾¾å¼
grep -P "(\d{1,3}\.){3}\d{1,3}" xxx.txt

# grepå‚æ•°

-n æ˜¾ç¤ºè¡Œå·
[root@localhost ~]# grep -n'tcp'test.txt
# vitest.txt+48ï¼Œè¡¨ç¤ºè¿›å…¥viçš„æ—¶å€™ï¼Œå…‰æ ‡ç›´æ¥å®šä½çš„48è¡Œèµ·å§‹ä½ç½®ã€‚

-c å¯¹ç»“æœè¡Œè®¡æ•°
[root@localhost~]# grep -câ€˜tcp'test.txt
14

-i ä¸åŒºåˆ†å¤§å°å†™
[root@localhost ~]# grep -n'tcpâ€² test.txt -i

-V åå‘æœç´¢ï¼Œå–å
[root@localhost~]#grep-nâ€˜udp'test.txt-V#å°†ä¸å«æœ‰udpçš„è¡Œå…¨éƒ¨è¿‡æ»¤å‡ºæ¥

-w ç²¾å‡†åŒ¹é…
[root@localhost ~]#grep -w'tcp'test.txt

-o åªæ˜¾ç¤ºåŒ¹é…çš„ç»“æœï¼Œå‰é¢çš„ç¬¬ä¸€ä¸ªç¤ºä¾‹ä¸­æˆ‘ä»¬ç”¨è¿‡-oå‚æ•°
[root@localhost ~]# grep -o -n'tcp'test.txt

-A1 åŒæ—¶æ‰“å°æœç´¢ç»“æœè¡Œçš„åä¸€è¡Œï¼ŒAæ˜¯afterçš„ç®€å†™
[root@localhost ~]# grep -A2'ftp'test.txt
[root@localhost~]# grep -A 2'ftpâ€²test.txt

-B3 åŒæ—¶æ‰“å°æœç´¢ç»“æœè¡Œçš„å‰ä¸‰è¡Œï¼ŒBæ˜¯beforeçš„ç®€å†™
[root@localhost~]# grep -B2'ftp'test.txt

-C2 åŒæ—¶æ‰“å°æœç´¢ç»“æœè¡Œçš„ä¸Šä¸‹å„ä¸¤è¡Œ
[root@localhost~]# grep -C2'ftp'test.txt

-E æ‰©å±•æ­£åˆ™è¡¨è¾¾å¼
#æ­£åˆ™æˆ‘ä»¬ä¸‹é¢ä¼šç»†è®²ï¼Œå…ˆç®€å•äº†è§£ä¸€ä¸‹ã€‚
[root@localhost~]# grep -E.tp'test.txt#ï¼Œå°±æ˜¯æ­£åˆ™è¡¨è¾¾å¼ï¼Œè¡¨ç¤ºä»»æ„çš„ä¸€ä¸ªå­—ç¬¦
[root@localhost~]#grep-Eâ€˜ftp|ssh'test.txt#æŸ¥æ‰¾ftpæˆ–è€…sshï¼Œ|æ˜¯æˆ–è€…çš„æ„æ€ï¼Œå¯ä»¥ç”¨å¤šä¸ªftp|ssh|telnet..

-P ä½¿ç”¨per1æ­£åˆ™å¹¿
#per1è¯­è¨€ä¸­è®¾è®¡çš„æ­£åˆ™è¡¨è¾¾å¼å†™æ³•è§„åˆ™ï¼Œå¾ˆå¼ºå¤§ï¼Œå¾ˆå¤šé¢†åŸŸéƒ½æ”¯æŒper1æ­£åˆ™çš„è¯­æ³•ç»“æ„ã€‚
[root@localhost ~]# grep-P"d+"test.txt#åŒ¹é…æ‰€æœ‰çš„æ•°å­—
[root@localhost~]#grep -P"\d{4,}"test.txt#åŒ¹é…4ä½çš„æ•°å­—
```



#### sed

```zsh
# æŒ‰è¡Œä¿®æ”¹æ›¿æ¢
ç”¨æ³•ï¼šsed[-nri][åŠ¨ä½œ]ç›®æ ‡æ–‡ä»¶æ–‡ä»¶
é€‰é¡¹ä¸å‚æ•°ï¼š
-nï¼šä½¿ç”¨å®‰é™ï¼ˆsilentï¼‰æ¨¡å¼ã€‚åœ¨ä¸€èˆ¬sedçš„ç”¨æ³•ä¸­ï¼Œæ‰€æœ‰æ¥è‡ªSTDINçš„æ•°æ®ä¸€èˆ¬éƒ½ä¼šè¢«åˆ—å‡ºåˆ°ç»ˆç«¯ä¸Šã€‚ä½†å¦‚æœåŠ ä¸Š-nå‚æ•°åï¼Œåˆ™åªæœ‰ç»è¿‡sedç‰¹æ®Šå¤„ç†çš„é‚£ä¸€è¡Œï¼ˆæˆ–è€…åŠ¨ä½œï¼‰æ‰ä¼šè¢«åˆ—å‡ºæ¥ã€‚
-rï¼šSedçš„åŠ¨ä½œæ”¯æŒçš„æ˜¯å»¶ä¼¸å‹æ­£åˆ™è¡¨ç¤ºæ³•çš„è¯­æ³•ã€‚ï¼ˆé»˜è®¤æ˜¯åŸºç¡€æ­£åˆ™è¡¨ç¤ºæ³•è¯­æ³•ï¼‰
-iï¼šç›´æ¥ä¿®æ”¹è¯»å–çš„æ–‡ä»¶å†…å®¹ï¼Œè€Œä¸æ˜¯è¾“å‡ºåˆ°ç»ˆç«¯ã€‚

åŠ¨ä½œè¯´æ˜ï¼š[ni[ï¼Œn2]]function
nlï¼Œn2ä¸€èˆ¬è¡¨ç¤ºä¸ºè¡Œå·ï¼Œã€ï¼Œn2]è¡¨ç¤ºè¿™ä¸ªå‚æ•°å¯é€‰ï¼Œå¯æœ‰å¯æ— ã€‚

function:
aï¼šæŒ‡å®šè¡Œåé¢æ’å…¥ä¸€è¡Œ
dï¼šåˆ é™¤
1ï¼šæŒ‡å®šè¡Œå‰é¢æ’å…¥ä¸€è¡Œ
pï¼šæ‰“å°ï¼Œ#ä¸€èˆ¬å’Œå‰é¢çš„-nå‚æ•°ä¸€èµ·ç”¨
sï¼šæ›¿æ¢éœ€è¦Iå¿½ç•¥å¤§å°å†™ï¼Œå…¨å±€æ›¿æ¢éœ€è¦g

# æ–‡æœ¬æ›¿æ¢
# å°†æ–‡ä»¶ä¸­çš„ "apple" æ›¿æ¢ä¸º "orange"ï¼ˆåªæ›¿æ¢æ¯è¡Œç¬¬ä¸€ä¸ªï¼‰
sed 's/apple/orange/' file.txt

# å…¨å±€æ›¿æ¢ï¼ˆæ‰€æœ‰åŒ¹é…ï¼‰
sed 's/apple/orange/g' file.txt

# å¿½ç•¥å¤§å°å†™æ›¿æ¢
sed 's/apple/orange/gi' file.txt

# æ›¿æ¢å¹¶ç›´æ¥ä¿®æ”¹åŸæ–‡ä»¶ï¼ˆåŠ  `-i`ï¼‰
sed -i 's/apple/orange/g' file.txt

# æ–‡æœ¬åˆ é™¤
# åˆ é™¤ç¬¬ 3 è¡Œ
sed '3d' file.txt

# åˆ é™¤åŒ…å« "error" çš„è¡Œ
sed '/error/d' file.txt

# åˆ é™¤ 10-20 è¡Œ
sed '10,20d' file.txt

# åˆ é™¤ç©ºè¡Œ
sed '/^$/d' file.txt

# æ’å…¥/è¿½åŠ 
# åœ¨ç¬¬ 3 è¡Œå‰æ’å…¥ä¸€è¡Œ
sed '3i\æ’å…¥çš„å†…å®¹' file.txt

# åœ¨ç¬¬ 3 è¡Œåè¿½åŠ ä¸€è¡Œ
sed '3a\è¿½åŠ çš„å†…å®¹' file.txt

# åœ¨åŒ¹é…è¡Œåè¿½åŠ 
sed '/pattern/a\è¿½åŠ çš„å†…å®¹' file.txt

# æ‰“å°ç‰¹å®šè¡Œ
# æ‰“å°ç¬¬ 5 è¡Œ
sed -n '5p' file.txt

# æ‰“å° 10-15 è¡Œ
sed -n '10,15p' file.txt

# æ‰“å°åŒ…å« "hello" çš„è¡Œ
sed -n '/hello/p' file.txt

# æ‰“å°æ–‡ä»¶æœ€åä¸€è¡Œ
sed -n '$p' file.txt

# å¤šå‘½ä»¤ç»„åˆ
# æ›¿æ¢å¹¶åˆ é™¤ç©ºè¡Œ
sed -e 's/apple/orange/g' -e '/^$/d' file.txt

# æˆ–ç”¨åˆ†å·åˆ†éš”
sed 's/apple/orange/g; /^$/d' file.txt

# ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼
# æ›¿æ¢æ‰€æœ‰æ•°å­—ä¸º "X"
sed 's/[0-9]/X/g' file.txt

# åˆ é™¤è¡Œé¦–ç©ºæ ¼
sed 's/^[ \t]*//' file.txt

# æ›¿æ¢ "foo" å¼€å¤´çš„è¡Œ
sed 's/^foo/bar/' file.txt
```





#### awk

```zsh
# æŒ‰åˆ—è¿‡æ»¤
# åŸºæœ¬è¯­æ³•
awk 'æ¨¡å¼ {åŠ¨ä½œ}' æ–‡ä»¶å

# æ‰“å°åˆ—
# æ‰“å°ç¬¬1åˆ—å’Œç¬¬3åˆ—
awk '{print $1, $3}' file.txt
# æ‰“å°æœ€åä¸€åˆ—
awk '{print $NF}' file.txt

# æŒ‡å®šåˆ†éš”ç¬¦
# ä½¿ç”¨é€—å·åˆ†éš”ï¼ˆé»˜è®¤æ˜¯ç©ºæ ¼/åˆ¶è¡¨ç¬¦ï¼‰
awk -F',' '{print $2}' data.csv
# ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼ä½œä¸ºåˆ†éš”ç¬¦ï¼ˆå¦‚å†’å·æˆ–ç©ºæ ¼ï¼‰
awk -F'[: ]' '{print $1, $3}' file.txt


# NR å½“å‰è¡Œå·	
awk 'NR==3 {print}' file
# NF å½“å‰è¡Œçš„åˆ—æ•°	
awk '{print NF}' file
# FS è¾“å…¥å­—æ®µåˆ†éš”ç¬¦ï¼ˆé»˜è®¤ç©ºæ ¼ï¼‰	
awk 'BEGIN{FS=":"} {...}'
# OFS è¾“å‡ºå­—æ®µåˆ†éš”ç¬¦ï¼ˆé»˜è®¤ç©ºæ ¼ï¼‰	
awk 'BEGIN{OFS=";"} {...}'
# FILENAME å½“å‰æ–‡ä»¶å	
awk '{print FILENAME}'

# æ¡ä»¶è¿‡æ»¤
# æ‰“å°ç¬¬2åˆ—å¤§äº100çš„è¡Œ
awk '$2 > 100 {print $0}' file.txt
# æ‰“å°åŒ…å« "error" çš„è¡Œ
awk '/error/ {print}' file.txt
# æ‰“å°ç¬¬3åˆ—ç­‰äº "apple" çš„è¡Œ
awk '$3 == "apple" {print $1, $2}' file.txt

# æ­£åˆ™è¡¨è¾¾å¼
# æ‰“å°ä»¥ "A" å¼€å¤´çš„è¡Œ
awk '/^A/ {print}' file.txt
# æ‰“å°ç¬¬2åˆ—åŒ¹é…æ•°å­—çš„è¡Œ
awk '$2 ~ /[0-9]+/ {print}' file.txt

# å¤šæ–‡ä»¶å¤„ç†
# å¤„ç†å¤šä¸ªæ–‡ä»¶ï¼Œå¹¶æ‰“å°æ–‡ä»¶å
awk '{print FILENAME, $0}' file1.txt file2.txt
```



```zsh
# ç»Ÿè®¡
wc
# ç»Ÿè®¡å¤šå°‘è¡Œ
wc -l xxx.txt
# ç»Ÿè®¡å¤šå°‘å­—
wc -c xxx.txt
# ç»Ÿè®¡å¤šå°‘ä¸ªæ–‡ä»¶
ls /bin | wc -l

# --------------------

# ç”Ÿæˆæ•°å­—åºåˆ—
seq 1 100
# ç”Ÿæˆç­‰å®½æ•°å­—åºåˆ—
seq -w 1 100

# --------------------

# æ’åº(ä»å°åˆ°å¤§,ä»æ•°å­—åˆ°å­—ç¬¦)
cat xxx.txt | sort
# æ’åº(ä»å°åˆ°å¤§,ä»å­—ç¬¦åˆ°æ•°å­—)
cat xxx.txt | sort -n

# --------------------

# å»é‡(è¿ç»­)è¦ç»“åˆè¿™sortä½¿ç”¨
cat xxx.txt | sort | uniq
# c:å­—ç¬¦å‡ºç°äº†å‡ æ¬¡
cat xxx.txt | sort | uniq -c

# --------------------

# tr:å­—ç¬¦æ›¿æ¢ã€åˆ é™¤æˆ–å‹ç¼©é‡å¤å­—ç¬¦
# -c æˆ– --complement: ä½¿ç”¨ SET1 çš„è¡¥é›†
# -d æˆ– --delete: åˆ é™¤ SET1 ä¸­çš„å­—ç¬¦ï¼Œä¸è¿›è¡Œè½¬æ¢
# -s æˆ– --squeeze-repeats: å°† SET1 ä¸­è¿ç»­é‡å¤çš„å­—ç¬¦å‹ç¼©ä¸ºå•ä¸ªå­—ç¬¦
# -t æˆ– --truncate-set1: å°† SET1 æˆªæ–­ä¸ºä¸ SET2 ç›¸åŒçš„é•¿åº¦

# å°†å°å†™å­—æ¯è½¬æ¢ä¸ºå¤§å†™
echo "hello world" | tr 'a-z' 'A-Z'
# è¾“å‡º: HELLO WORLD

# å°†å¤§å†™å­—æ¯è½¬æ¢ä¸ºå°å†™
echo "HELLO" | tr 'A-Z' 'a-z'
# è¾“å‡º: hello

# åˆ é™¤æ‰€æœ‰æ•°å­—
echo "abc123def456" | tr -d '0-9'
# è¾“å‡º: abcdef

# åˆ é™¤æ‰€æœ‰ç©ºæ ¼
echo "a b c d" | tr -d ' '
# è¾“å‡º: abcd

# å°†å†’å·æ›¿æ¢ä¸ºç©ºæ ¼
echo "a:b:c:d" | tr ':' ' '
# è¾“å‡º: a b c d

# å°†å¤šä¸ªå­—ç¬¦æ›¿æ¢ä¸ºå•ä¸ªå­—ç¬¦
echo "hello   world" | tr -s ' ' ' '
# è¾“å‡º: hello world (å‹ç¼©å¤šä¸ªç©ºæ ¼ä¸ºä¸€ä¸ª)

# åˆ é™¤æ–‡ä»¶ä¸­çš„éæ‰“å°å­—ç¬¦
cat file.txt | tr -d '\000-\011\013\014\016-\037'

# --------------------
# strings:ç”¨äºä»äºŒè¿›åˆ¶æ–‡ä»¶ä¸­æå–å¯æ‰“å°å­—ç¬¦ä¸²çš„å®ç”¨å·¥å…·
# æŸ¥çœ‹äºŒè¿›åˆ¶æ–‡ä»¶ä¸­çš„å¯æ‰“å°å­—ç¬¦ä¸²
strings /bin/ls

# æŸ¥çœ‹ç‰¹å®šè¿›ç¨‹çš„å†…å­˜
strings /proc/[PID]/mem
```







# è½¯ä»¶



## nvim

### åŸºç¡€

`h`:å·¦

`l`:å³

`j`:ä¸‹

`k`:ä¸Š



### æ¨¡å¼åˆ‡æ¢



#### æ™®é€šæ¨¡å¼(NORMAL)

`w`:æŒ‰å•è¯å‘åç§»åŠ¨

`b`:æŒ‰å•è¯å‘å‰ç§»åŠ¨

`f+å­—ç¬¦`:è·³è½¬åˆ°æŒ‡å®šå­—ç¬¦

`s+å‰ç¼€`:è·³è½¬åˆ°æŒ‡å®šå‰ç¼€

`]`:next(è·³è½¬åˆ°ä¸‹ä¸€ä¸ª..)

`[`:prev(è·³è½¬åˆ°ä¸Šä¸€ä¸ª..)

`shift+>>`:ç¼©è¿›

`shift+<<`:å–æ¶ˆç¼©è¿›

`gg`:æ–‡ç« å¼€å¤´

`shift+g`:æ–‡ç« æœ«å°¾

`gc`:æ³¨é‡Š

`d`:åˆ é™¤

`diw`:åˆ é™¤æ•´ä¸ªå•è¯

`ciw`:åˆ é™¤æ•´ä¸ªå•è¯åè¿›å…¥æ’å…¥æ¨¡å¼

`cc`:åˆ é™¤æ•´è¡Œè¿›å…¥æ’å…¥æ¨¡å¼

`dd`:åˆ é™¤æ•´è¡Œ

`u`:æ’¤é”€

`ctrl+r`:æ’¤é”€æ’¤é”€

`y`:å¤åˆ¶

`yy`:å¤åˆ¶æ•´è¡Œ

`æ•°å­—+yy`:å¤åˆ¶å¯¹åº”è¡Œæ•°

`x`:å‰ªåˆ‡

`p`:ç²˜è´´

`ctrl+u`:å‘ä¸Šç¿»é¡µ

`ctrl+d`:å‘ä¸‹ç¿»é¡µ



### æ’å…¥æ¨¡å¼

`i`:åœ¨å…‰æ ‡å‰é¢æ’å…¥

`a`:åœ¨å…‰æ ‡åé¢æ’å…¥



### é€‰ä¸­æ¨¡å¼(v)

`vi(`:é€‰ä¸­()ä¸­çš„æ‰€æœ‰å†…å®¹

`vi{`:é€‰ä¸­{}ä¸­çš„æ‰€æœ‰å†…å®¹

`vi"`:é€‰ä¸­""ä¸­çš„æ‰€æœ‰å†…å®¹

`shift+v`:é€‰ä¸­æ•´è¡Œ



### å‘½ä»¤æ¨¡å¼(:)

`:w`:ä¿å­˜

`:q`:é€€å‡º

`:wq`:ä¿å­˜å¹¶é€€å‡º

`qa`:é€€å‡ºå…¨éƒ¨(è¯¢é—®ä½ æ˜¯å¦ä¿å­˜)

`q!`:å¼ºåˆ¶é€€å‡º(ä¸ä¿å­˜)



### æ–‡ä»¶æ“ä½œ(super:ç©ºæ ¼)

`super+e`:æ‰“å¼€ä¾§è¾¹æ 

`ctrl+h/l`:ç§»åŠ¨ç„¦ç‚¹

`shift+h`:æ‰“å¼€éšè—æ–‡ä»¶

`ctrl+/`:æ‰“å¼€ç»ˆç«¯

`shfit+h/l`:åˆ‡æ¢tab

`super+b+d`:åˆ é™¤buffer(å…³é—­tab)

`super+super`:fzf(æŸ¥æ‰¾æ–‡ä»¶)

`r`:æ”¹åå­—

`a`:åˆ›å»ºæ–‡ä»¶(æ–‡ä»¶å¤¹/)

`d`:åˆ é™¤æ–‡ä»¶



## ventoy

åœ¨ linuxä¸Šä½¿ç”¨ç»ˆç«¯å®‰è£…å’Œé…ç½® Ventoy çš„å®Œæ•´æŒ‡å—ï¼š



### **Ventoyå®‰è£…**

```
wget https://github.com/ventoy/Ventoy/releases/download/v1.0.96/ventoy-1.0.96-linux.tar.gz
tar -xvf ventoy-1.0.96-linux.tar.gz
cd ventoy-1.0.96
```



### **è¯†åˆ«USBè®¾åˆ«**

```
# æŸ¥çœ‹Uç›˜ï¼ˆä¸€èˆ¬ä¸ºsdb,è¯·æ”¹ä¸ºä½ çš„è®¾å¤‡åï¼‰
sudo fdisk -l /dev/sdb

# æŸ¥çœ‹Uç›˜æ ¼å¼
lsblk -f
```

*æ³¨æ„*ï¼š ç¡®è®¤æ‚¨çš„ USB è®¾å¤‡æ ‡è¯†ï¼ˆå¦‚ /dev/sdbï¼‰ï¼Œ*æ“ä½œå°†æ ¼å¼åŒ–æ•´ä¸ªè®¾å¤‡ï¼*



### **å¸é™¤æŒ‚è½½**

```
sudo umount /dev/sdb*
```



### **å®‰å…¨å®‰è£…ï¼ˆç¦ç”¨å®‰å…¨å¯åŠ¨æ”¯æŒï¼‰**

```
sudo sh Ventoy2Disk.sh -i -s /dev/sdb
```

ğŸ“Œ é‡è¦é€‰é¡¹ï¼š

- -i å¼ºåˆ¶å®‰è£…ï¼ˆè¦†ç›–æ—§ç‰ˆï¼‰
- -r SIZE_MB ä¿ç•™ç©ºé—´ï¼ˆå¦‚ -r 4096 ä¿ç•™ 4GBï¼‰
- -s å¯ç”¨å®‰å…¨å¯åŠ¨æ”¯æŒ



### **æ·»åŠ  ISO**

```
# å¤åˆ¶ ISO æ–‡ä»¶ (æ›¿æ¢å®é™…è·¯å¾„)
sudo cp ~/è·¯å¾„/ç³»ç»Ÿé•œåƒ.iso /mnt/ventoy/
```



### **å¯åŠ¨éªŒè¯**

é‡å¯ç”µè„‘é€‰æ‹© USB å¯åŠ¨ï¼ŒVentoy å°†è‡ªåŠ¨æ‰«æå¹¶åˆ—å‡ºæ‰€æœ‰ ISO æ–‡ä»¶



### **æ›´æ–°Ventoyï¼ˆä¿ç•™ISOæ–‡ä»¶ï¼‰**

```
sudo sh Ventoy2Disk.sh -u /dev/sdb
```



### **é—®é¢˜**

**å…³é—­å®‰å…¨æ¨¡å¼ï¼ˆä¸€èˆ¬æ‰“ä¸å¼€éƒ½æ˜¯è¿™ä¸ªé—®é¢˜ï¼‰**

![img](.\assets\v2-cc4e3e3bc9144944cb219f325a22ef42_720w.gif)



**å…¶ä»–é—®é¢˜**

è¯·å‚è€ƒï¼š[**https://www.ventoy.net/cn/doc_news.html**](https://www.ventoy.net/cn/doc_news.html)

